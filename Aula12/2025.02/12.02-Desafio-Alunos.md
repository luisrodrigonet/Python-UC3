# Desafio - Model e Templates

## :one: Introdu√ß√£o

**Desafio**: A empresa solicitou que fossem criadas tabelas para utiliza√ß√£o e exibi√ß√£o de seus produtos na `template` ‚Äúprodutos‚Äù. 

Para completar o desafio os alunos devem realizar a cria√ß√£o da documenta√ß√£o e execu√ß√£o do projeto, envolvendo os seguintes passos

1.  Cria√ß√£o de `model` 
2.  Defini√ß√£o de tipos de cada propriedade 
3.  Uso do comando migrate 
4.  Ativa√ß√£o dos modelos dentro do admin 

Em grupos de no m√°ximo 3 componentes, cada grupo dever√° preparar uma documenta√ß√£o b√°sica para apresentar as poss√≠veis tabelas do sistema de forma clara e organizada. 

## :two: Explica√ß√£o

Imagine que voc√™ foi contratado para desenvolver uma aplica√ß√£o web de **e-commerce** para uma loja chamada **P√© na Estrada**, especializada na venda de cal√ßados esportivos, casuais e sociais. O primeiro passo do projeto √© a **modelagem dos dados**, utilizando o `framework` **Django**.

Sua tarefa consiste em criar os modelos necess√°rios para representar as principais entidades do sistema e seus relacionamentos.

### 2.1. Etapas da Atividade

1. Crie um novo projeto Django chamado `config` e um aplicativo interno chamado `produtos`.
   
2. No arquivo `models.py` do aplicativo `produtos`, defina as seguintes classes:
   
   - `Categoria` üß©
     - Representa os grupos de cal√ßados por tipo de uso. Exemplos: Esportivo, Casual, Social. 
     - Cont√©m nome e descri√ß√£o opcional, servindo como organizador hier√°rquico para os produtos.

   - `Produto` üß©
     - Armazena os cal√ßados dispon√≠veis para venda. 
     - Inclui nome, descri√ß√£o detalhada, pre√ßo com precis√£o decimal, quantidade em estoque e refer√™ncia obrigat√≥ria √† sua categoria.

   - `Cliente` üß©
      - Perfil estendido do usu√°rio Django (OneToOneField). 
      - Registra dados pessoais como telefone, foto de perfil, sexo (com op√ß√µes inclusivas), nome social, data de nascimento e CPF √∫nico. 
      - Funciona como perfil completo do cliente autenticado.

   - `EnderecoEntrega` üß©
     - Cadastro de endere√ßos para entrega dos pedidos. 
     - Relaciona-se a um cliente (muitos-para-um) e armazena endere√ßo completo, cidade, estado e CEP. 
     - Um cliente pode ter m√∫ltiplos endere√ßos.

   - `Pedido` üß©
     - Representa uma compra completa do cliente. 
     - Vincula-se ao cliente, endere√ßo de entrega espec√≠fico e rastreia status (Pendente, Pago, Enviado). 
     - Possui m√©todo total_pedido() para calcular valor total dos itens.


   - `ItemPedido` üß©
     - Detalha cada produto dentro de um pedido espec√≠fico. 
     - Registra quantidade comprada e pre√ßo unit√°rio no momento da compra (evita altera√ß√µes de pre√ßo futuras afetarem pedidos antigos).

   - `ComentarioAvalia√ß√£o` üß©
     - Sistema de avalia√ß√µes e coment√°rios dos clientes sobre produtos. 
     - Relaciona cliente, produto, texto do coment√°rio, nota num√©rica e data autom√°tica de cria√ß√£o.

3. Configure os relacionamentos adequados:
   - Um produto pertence a uma categoria.
   - Um cliente pode ter v√°rios endere√ßos de entrega.
   - Um pedido pertence a um cliente e associa um √∫nico endere√ßo de entrega.
   - Um pedido cont√©m v√°rios itens.
   - Cada coment√°rio/avalia√ß√£o relaciona um cliente a um produto.

   - **Resumindo**:
     - Produto ‚Üí Categoria (muitos-para-um)
     - Cliente ‚Üí User (um-para-um)
     - Endere√ßo ‚Üí Cliente (muitos-para-um)
     - Pedido ‚Üí Cliente/Endere√ßo (muitos-para-um)
     - ItemPedido ‚Üí Pedido/Produto (muitos-para-um)
     - Coment√°rio ‚Üí Produto/Cliente (muitos-para-um)

4. Ap√≥s definir os modelos, rode as migra√ß√µes com:
   ```bash
   python manage.py makemigrations
   python manage.py migrate
   ```

5. Crie um superusu√°rio e registre os modelos no `admin.py` para visualiz√°-los no painel administrativo.

### Desafio Extra

Adicione um m√©todo no modelo `Pedido` chamado `total_pedido` que calcula o valor total do pedido somando o valor dos itens (quantidade √ó pre√ßo unit√°rio).  

Exemplo de implementa√ß√£o:

```python
def total_pedido(self):
    total = sum(item.quantidade * item.preco_unitario for item in self.itempedido_set.all())
    return total
```
