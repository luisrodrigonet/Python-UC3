# 12.02.03 : üìù Registrando os modelos dentro do Admin

Este material nos guiar√° no processo de integra√ß√£o dos  modelos com a interface administrativa do Django.

A interface de administra√ß√£o do Django √© uma das suas funcionalidades mais poderosas. Ela cria automaticamente uma √°rea restrita para administradores do site, permitindo que eles gerenciem o conte√∫do de forma intuitiva. Para que isso funcione, precisamos "avisar" ao Django quais dos nossos modelos devem aparecer nessa √°rea.

Este guia ir√° detalhar, passo a passo, como registrar os modelos das suas aplica√ß√µes `produtos` e `site_loja` no admin do Django.

### üìú Vis√£o Geral do Processo

Ativar um modelo no **admin** do Django √© um processo simples e direto que consiste em tr√™s etapas principais, realizadas dentro do arquivo `admin.py` de cada aplica√ß√£o:

1.  **Importar o M√≥dulo `admin`**: 
    - O Django j√° inclui a importa√ß√£o **`from django.contrib import admin`** no arquivo **`admin.py`** gerado automaticamente.
    
2.  **Importar seus Modelos**: 
    - Voc√™ precisa importar as classes dos modelos que deseja registrar. 
    - Elas est√£o localizadas no arquivo **`models.py`** da mesma aplica√ß√£o.
    
3.  **Registrar os Modelos**: 
    - Utilizar a fun√ß√£o **`admin.site.register()`** para cada modelo que voc√™ importou.

Ao registrar um modelo, o Django automaticamente cria uma interface de usu√°rio completa para visualizar, criar, editar e excluir registros daquele modelo no banco de dados.

Vamos agora aplicar esse conhecimento aos modelos do seu projeto `core`.

### üì¶ Ativando os Modelos da Aplica√ß√£o `produtos`

A aplica√ß√£o `produtos` √© respons√°vel por gerenciar as categorias e os pr√≥prios produtos da sua loja. Vamos registrar os modelos `Categoria` e `Produto` para que possamos gerenci√°-los facilmente pela √°rea administrativa.

:one: **Localize e Abra o Arquivo `admin.py`**

Dentro da sua aplica√ß√£o **`produtos`**, encontre e abra o arquivo **`produtos/admin.py`**. Ele provavelmente ter√° o seguinte conte√∫do inicial:

```python
# produtos/admin.py
from django.contrib import admin

# Register your models here.
```

:two: **Importe os Modelos `Categoria` e `Produto`**

Precisamos trazer as classes **`Categoria`** e **`Produto`** do arquivo **`models.py`** para dentro do **`admin.py`**. Faremos isso com uma importa√ß√£o relativa, usando o **`.`** para indicar que o m√≥dulo **`models`** est√° no mesmo diret√≥rio.

Adicione a seguinte linha ao seu arquivo:

```python
from .models import Categoria, Produto
```

:three: **Registre os Modelos**

Agora, para cada modelo importado, chame a fun√ß√£o **`admin.site.register()`**. Esta √© a linha que efetivamente "ativa" o modelo no admin.

Adicione as seguintes linhas:

```python
admin.site.register(Categoria)
admin.site.register(Produto)
```

**C√≥digo Final para `produtos/admin.py`**

Ap√≥s seguir os passos, seu arquivo `produtos/admin.py` dever√° estar assim:

```python
# produtos/admin.py
from django.contrib import admin
from .models import Categoria, Produto

# Registra o modelo Categoria na interface de administra√ß√£o
admin.site.register(Categoria)

# Registra o modelo Produto na interface de administra√ß√£o
admin.site.register(Produto)
```

Pronto\! Com apenas 3 linhas de c√≥digo, voc√™ deu aos administradores do site o poder de gerenciar todas as categorias e produtos da sua loja.

### üõçÔ∏è Ativando os Modelos da Aplica√ß√£o `site_loja`

A aplica√ß√£o **`site_loja**` cont√©m a l√≥gica do site que o cliente v√™ e interage, incluindo perfis de usu√°rio, formul√°rio de contato, coment√°rios e o sistema de compras. Vamos registrar todos os modelos relevantes desta aplica√ß√£o.

:one: **Localize e Abra o Arquivo `admin.py`**

Assim como antes, v√° at√© o diret√≥rio da sua aplica√ß√£o **`site_loja`** e abra o arquivo **`site_loja/admin.py`**.

:two: **Importe os Modelos Necess√°rios**

Esta aplica√ß√£o possui mais modelos. Vamos importar todos eles do arquivo **`models.py`** local.

Adicione a seguinte linha de importa√ß√£o:

```python
from .models import Perfil, Contato, Comentario, Compra, ItemCompra
```

:three: **Registre Cada Modelo**

Agora, vamos registrar cada um dos modelos importados para que eles apare√ßam na interface de administra√ß√£o.

Adicione as seguintes linhas ao seu arquivo **`site_loja/admin.py`**:

```python
admin.site.register(Perfil)
admin.site.register(Contato)
admin.site.register(Comentario)
admin.site.register(Compra)
admin.site.register(ItemCompra)
```

**C√≥digo Final para `site_loja/admin.py`**

O arquivo **`site_loja/admin.py`** completo ficar√° assim:

```python
# site_loja/admin.py
from django.contrib import admin
from .models import Perfil, Contato, Comentario, Compra, ItemCompra

# Registra os modelos da aplica√ß√£o site_loja na interface de administra√ß√£o
admin.site.register(Perfil)
admin.site.register(Contato)
admin.site.register(Comentario)
admin.site.register(Compra)
admin.site.register(ItemCompra)
```

### ‚úÖ Verificando o Resultado

Para ver a m√°gica acontecer, siga estes passos:

:one:  **Inicie o Servidor:** No seu terminal, na pasta raiz do projeto, execute o comando:

```bash
python manage.py runserver
```

:two:  **Acesse a √Årea Administrativa:** Abra seu navegador e acesse o endere√ßo:

```
http://127.0.0.1:8000/admin/
```

:three: **Fa√ßa Login:** Utilize as credenciais de um superusu√°rio que voc√™ criou anteriormente (com o comando `python manage.py createsuperuser`).

Ap√≥s o login, voc√™ ver√° uma tela de administra√ß√£o renovada. Nela, haver√° duas se√ß√µes novas, uma para cada aplica√ß√£o:

  * **PRODUTOS**
      * Categorias
      * Produtos
  * **SITE\_LOJA**
      * Coment√°rios
      * Compras
      * Contatos (o admin usar√° o `verbose_name_plural`, "Mensagens de Contato")
      * Itens de Compra
      * Perfis

Voc√™ pode clicar em qualquer um desses links para come√ßar a adicionar, editar e remover dados de forma visual e intuitiva\!

### üöÄ Pr√≥ximos Passos: Personalizando o Admin

Registrar os modelos √© apenas o primeiro passo. O Django permite personalizar extensivamente como cada modelo √© exibido e gerenciado no admin usando classes **`ModelAdmin`**.

Por exemplo, voc√™ poderia:

  * Mostrar mais colunas na listagem de produtos (como pre√ßo e estoque) usando `list_display`.
  * Adicionar filtros para encontrar produtos por categoria ou disponibilidade com `list_filter`.
  * Adicionar uma barra de busca para encontrar um contato por nome ou e-mail com `search_fields`.
  * Exibir os `ItemCompra` diretamente na p√°gina de detalhe de uma `Compra` usando `inlines`.

Essas personaliza√ß√µes transformam a interface de administra√ß√£o em uma ferramenta de gerenciamento ainda mais poderosa e adaptada √†s necessidades do seu projeto.

