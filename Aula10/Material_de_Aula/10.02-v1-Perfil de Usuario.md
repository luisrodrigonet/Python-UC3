
## 10.02 : Gestão de Perfis de Usuário (parte 1)

Com este material aprenderemos como criar e gerenciar perfis de usuários em sua aplicação, incluindo a funcionalidade de upload e atualização de imagens de perfil.

Aprofundaremos na customização do modelo de usuário do Django, que por padrão não inclui campos para informações adicionais como uma imagem de perfil. Para isso, criaremos um **modelo de perfil separado** que terá uma relação de "**um para um**" com o modelo de usuário. Isso nos permite **estender as funcionalidades** do usuário **sem modificar** o modelo padrão do Django, o que é uma prática recomendada.

Vamos cobrir os seguintes tópicos:

  * **Configurando o Ambiente**: 
      * Primeiros passos para garantir que seu projeto está pronto.
      
  * **Criando o Modelo de Perfil**: 
      * Como adicionar **campos personalizados** ao perfil do usuário, incluindo a imagem de perfil.
      
  * **Configurando os URLs**: 
      * Como **rotear as requisições** para as views corretas.
      
  * **Criando as Views**:
      * A lógica por trás da exibição e atualização dos perfis.
      
  * **Criando os Formulários**: 
      * Como lidar com os dados enviados pelos usuários.
      
  * **Configurando os Templates**: 
      * Como exibir e interagir com os dados do perfil.
      
  * **Considerações Finais**: 
      * Dicas importantes para continuar desenvolvendo.


### :one: Configurando o Ambiente

Antes de começarmos a codificar, precisamos garantir que seu projeto Django esteja **configurado para lidar com uploads** de arquivos.

1. **Instale o Pillow**: Para que o Django possa processar imagens, você precisa da biblioteca **`Pillow`**. Abra seu terminal e execute:

    ```bash
    pip install Pillow
    ```

1. **Configurações no `settings.py`**: No arquivo **`core/settings.py`**, precisamos definir onde o Django irá armazenar os arquivos de mídia (como as imagens de perfil) e como eles serão acessados.


    Já realizamos este processo de um material anterior, mas revisaremos o mesmo. Abra  e localize as seguintes linhas ao final do arquivo **`settings.py`**:

    ```python
    # core/settings.py

    # ... suas configurações existentes ...
    
    from pathlib import Path # Importe a biblioteca pathlib
    
    MEDIA_URL = '/media/'
    MEDIA_ROOT = Path(BASE_DIR) / 'media' # Usando pathlib para juntar caminhos
    
    # ... suas configurações existentes ...
    ```

      * **`MEDIA_URL`**: 
        - É a URL pública que será usada para acessar seus arquivos de mídia no navegador (ex: `http://localhost:8000/media/minha_imagem.jpg`).
        
      * **`MEDIA_ROOT`**: 
        - É o caminho absoluto no seu sistema de arquivos onde os arquivos de mídia serão armazenados.

1. **Configurando URLs de Mídia**: 
    - Para que o Django sirva os arquivos de mídia durante o desenvolvimento, precisamos adicionar uma configuração especial no arquivo principal de URLs do seu projeto (**`core/urls.py`**).

    Verifique o  `core/urls.py` e localize as seguintes linhas:

    ```python
    # core/urls.py

    from django.contrib import admin
    from django.urls import path, include
    from django.conf import settings # Importe settings
    from django.conf.urls.static import static # Importe static

    urlpatterns = [
        path('admin/', admin.site.urls),
        path('produtos/', include('produtos.urls')), # Exemplo, se já existir
        path('site_loja/', include('site_loja.urls')),
        # URLs para autenticação - aula 10
        path('accounts/', include('django.contrib.auth.urls')), 
    ]

    # Apenas para ambiente de desenvolvimento! Não use em produção.
    if settings.DEBUG:
        urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
    ```

      * **`static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)`**: 
        - Esta linha é crucial para que o Django sirva os arquivos da pasta `media` durante o desenvolvimento. 
        - ⚠️ **Lembre-se:** em produção, você usaria um servidor web como Nginx ou Apache para servir arquivos estáticos e de mídia diretamente, e não o servidor de desenvolvimento do Django.

### :two: Criando o Modelo de Perfil

Agora, vamos criar o modelo de perfil na sua aplicação **`site_loja`**. 

Este modelo terá um **campo para a imagem** de perfil e **uma ligação com o modelo** de usuário **padrão** do Django.

1. **Crie o arquivo `models.py` na aplicação `site_loja` (se não existir)**:

    ```python
    # site_loja/models.py (aula 10)

    from django.db import models
    from django.contrib.auth.models import User # Importa o modelo de usuário padrão do Django
    from PIL import Image # Importa o Image para redimensionar a imagem

    class Perfil(models.Model):
        usuario = models.OneToOneField(User, on_delete=models.CASCADE)
        imagem = models.ImageField(default='perfil_padrao.jpg', upload_to='imagens_perfil')

        def __str__(self):
            return f'Perfil de {self.usuario.username}'

        def save(self, *args, **kwargs):
            super().save(*args, **kwargs) # Salva a imagem primeiro

            img = Image.open(self.imagem.path) # Abre a imagem
            if img.height > 300 or img.width > 300: # Verifica se é maior que 300x300 pixels
                output_size = (300, 300)
                img.thumbnail(output_size) # Redimensiona a imagem
                img.save(self.imagem.path) # Salva a imagem redimensionada
    ```

      * **`usuario = models.OneToOneField(User, on_delete=models.CASCADE)`**:
        - Este campo cria uma relação de "um para um" entre um **`Perfil`** e um **`User`**. 
        - Isso significa que cada usuário terá **apenas um** perfil, e vice-versa. 
        - **`on_delete=models.CASCADE`** significa que se um usuário for excluído, seu perfil também será.
        
      * **`imagem = models.ImageField(default='perfil_padrao.jpg', upload_to='imagens_perfil')`**: 
        - Este é o campo para a imagem.
        - **`default='perfil_padrao.jpg'`**: Define uma imagem padrão caso o usuário não envie uma. 
        - **Você precisará criar essa imagem **`perfil_padrao.jpg`** e colocá-la na sua pasta **`media/imagens_perfil`** (ou na raiz de `media` se preferir).**
        - **`upload_to='imagens_perfil'`**: As imagens serão salvas em `MEDIA_ROOT/imagens_perfil/`.
      
      * **Método `save` customizado**: 
        - Este método sobrescreve o método `save` padrão do Django. 
        - Ele é executado toda vez que um objeto `Perfil` é salvo. 
        - Aqui, abrimos a imagem e, se ela for maior que 300x300 pixels, a redimensionamos antes de salvá-la novamente. 
        - Isso é importante para otimização e padronização.

1. **Registre o Modelo no Admin**: Para que você possa gerenciar os perfis no painel de administração do Django, adicione o seguinte ao **`site_loja/admin.py`**:

    ```python
    # site_loja/admin.py - Aula 10

    from django.contrib import admin
    from .models import Perfil

    admin.site.register(Perfil)
    ```

1. **Faça as Migrações**: Toda vez que você cria ou modifica um modelo, precisa dizer ao Django para criar (ou atualizar) a tabela correspondente no banco de dados.

    ```bash
    python manage.py makemigrations site_loja
    python manage.py migrate
    ```


### :three: Criando Formulários para o Perfil

Vamos criar um formulário para permitir que os usuários atualizem suas informações de perfil, incluindo a imagem.

1. Crie o arquivo **`forms.py`** na aplicação **`site_loja`**:

    ```python
    # site_loja/forms.py - Aula 10

    from django import forms
    from django.contrib.auth.models import User
    from .models import Perfil

    class UserUpdateForm(forms.ModelForm):
        email = forms.EmailField()

        class Meta:
            model = User
            fields = ['username', 'email']

    class PerfilUpdateForm(forms.ModelForm):
        class Meta:
            model = Perfil
            fields = ['imagem']
    ```

      * **`UserUpdateForm`**: 
        - Este formulário permite que o usuário atualize seu nome de usuário e e-mail. 
        - Ele é baseado no modelo `User` padrão do Django.
        
      * **`PerfilUpdateForm`**: 
        - Este formulário é para a imagem de perfil. 
        - Ele é baseado no modelo `Perfil` que acabamos de criar.

### :four: Configurando os URLs para Perfil

Agora, precisamos definir as `URLs` que serão usadas para acessar a página de perfil.

1. Crie (ou edite) o arquivo **`site_loja/urls.py`**:

    ```python
    # site_loja/urls.py

    from django.urls import path
    from . import views

    app_name = 'site_loja' # Define um namespace para suas URLs

    urlpatterns = [
        path('', views.home, name='home'),
        path('produtos/', views.listar_produtos, name='listar_produtos'),
        path('perfil/', views.perfil, name='perfil'), # URL para a página de perfil
    ]
    ```

      * **`app_name = 'site_loja'`**: 
        - É uma boa prática usar namespaces para suas URLs, especialmente em projetos maiores. 
        - Isso evita conflitos de nomes entre diferentes aplicações.
        
      * **`path('perfil/', views.perfil, name='perfil')`**: 
        - Esta linha mapeia a URL `/site_loja/perfil/` para a função `perfil` dentro do arquivo `site_loja/views.py`. 
        - O `name='perfil'` nos permitirá referenciar essa URL facilmente nos templates.

### :five:  Criando as Views para Perfil

Agora, vamos escrever a lógica nas views para exibir e atualizar o perfil.

1. Edite o arquivo **`site_loja/views.py`**:

    ```python
    # site_loja/views.py

    from django.shortcuts import render, redirect
    from django.contrib.auth.decorators import login_required # Importa o decorador
    from .forms import UserUpdateForm, PerfilUpdateForm
    from .models import Perfil # Importa o modelo Perfil
    from django.contrib import messages # Importa mensagens para feedback ao usuário

    def home(request):
        return render(request, 'site_loja/home.html')

    def listar_produtos(request):
        # Lógica para listar produtos (exemplo)
        produtos = [] # Substitua pela sua lógica real
        return render(request, 'site_loja/listar_produtos.html', {'produtos': produtos})

    @login_required # Garante que o usuário esteja logado para acessar esta view
    def perfil(request):
        if request.method == 'POST':
            # Popula os formulários com os dados enviados pelo POST e instâncias existentes
            u_form = UserUpdateForm(request.POST, instance=request.user)
            p_form = PerfilUpdateForm(request.POST, request.FILES, instance=request.user.perfil)

            if u_form.is_valid() and p_form.is_valid():
                u_form.save()
                p_form.save()
                messages.success(request, f'Seu perfil foi atualizado com sucesso!')
                return redirect('site_loja:perfil') # Redireciona para evitar reenvio do formulário
            else:
                messages.error(request, 'Ocorreu um erro ao atualizar seu perfil. Verifique os dados.')

        else: # Se a requisição for GET (primeira vez que a página é acessada)
            u_form = UserUpdateForm(instance=request.user)
            p_form = PerfilUpdateForm(instance=request.user.perfil)

        context = {
            'u_form': u_form,
            'p_form': p_form
        }
        return render(request, 'site_loja/perfil.html', context)
    ```

      * **`@login_required`**: 
        - Este decorador garante que apenas usuários logados possam acessar a view de perfil. 
        - Se um usuário não estiver logado e tentar acessar `/site_loja/perfil/`, o Django o redirecionará para a página de login.
        
      * **`request.method == 'POST'`**:  Verifica se o formulário foi submetido (via POST).
          * **`UserUpdateForm(request.POST, instance=request.user)`**: Criamos uma instância do `UserUpdateForm`, preenchendo-o com os dados do POST (`request.POST`) e vinculando-o à instância do usuário logado (`request.user`).
          
          * **`PerfilUpdateForm(request.POST, request.FILES, instance=request.user.perfil)`**: Criamos uma instância do `PerfilUpdateForm`. Além de `request.POST` (para dados de texto), passamos `request.FILES` para lidar com o upload da imagem. O `instance=request.user.perfil` vincula o formulário ao perfil do usuário logado.
          
          * **`if u_form.is_valid() and p_form.is_valid():`**: Verifica se ambos os formulários são válidos.
          
          * **`u_form.save()` e `p_form.save()`**: Salva as alterações nos modelos `User` e `Perfil`.
          
          * **`messages.success(...)` e `messages.error(...)`**: Usamos o sistema de mensagens do Django para fornecer feedback ao usuário.
          * **`return redirect('site_loja:perfil')`**: Redireciona o usuário de volta para a página de perfil após a atualização. Isso é uma prática comum para evitar que o formulário seja submetido novamente se o usuário atualizar a página.
          
      * **`else:` (Requisição GET)**: Se a requisição não for POST, significa que o usuário está acessando a página pela primeira vez. Neste caso, apenas criamos instâncias vazias dos formulários, preenchendo-os com os dados atuais do usuário e do perfil.
      
      * **`context`**: Dicionário que envia os formulários para o template.

### :five: Criando os Templates para Perfil

Agora, vamos criar os templates HTML para exibir o perfil do usuário e permitir a atualização. Como o  projeto já utiliza templates e partials, vamos adaptar o conceito para incluir um template base e estender dele.

1. Crie (ou adapte) um template base no **`site_loja/templates/site_loja/base.html`**:
    Este é um exemplo de um template base. Certifique-se de que o seu `base.html` contenha o bloco `content` onde o conteúdo específico de cada página será inserido.

    ```html
    {# ESSA LINHA É CRÍTICA PARA USAR STATIC FILES #}
    {# Aula 10.01.03 #}
    {% load static %} 
    <!DOCTYPE html>
    <html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
        <!-- Block title -->
        <title>{% block title %}Papagaio's -  Loja Online{% endblock %}</title>
    
        <!-- CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
            rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
            crossorigin="anonymous">
    
        <link rel="stylesheet" href="{% static 'css/style.css' %}">
        
    
        <!-- Bloco extra_css -->
        {% block extra_css %}
        
        {% endblock %}
        <!-- Bloco extra_css -->
    
    </head>
    
    <body>
    
        <!-- Partial - _navbar.html -->
        {% include 'site_loja/partials/_navbar.html' %}
    
        <main class="container mt-4">
    
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
    
            <!-- Bloco - content -->
            {% block content %}
            {% endblock %}
            <!-- Bloco - content -->
    
        </main>
    
        <!-- Partial - _footer.html -->
        {% include 'site_loja/partials/_footer.html' %}
        
        <!-- JS --> 
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIh7/8yUq2p3I4k64bB" 
            crossorigin="anonymous">
        </script>
    
        <script src="{% static 'js/script.js' %}"></script>
    
        <!-- Bloco - extra_js -->
        {% block extra_js %}
        
        {% endblock %}
        <!-- Bloco - extra_js -->
    
    </body>
    </html>
    ```
    
1. Crie (ou adapte) o Partial com o navbar  no **`site_loja\templates\site_loja\partials\_navbar.html`**:  

    ```html
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="{% url 'site_loja:home' %}">Minha Loja</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="{% url 'site_loja:home' %}">Início</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'site_loja:produtos_lista' %}">Produtos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Contato</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Categorias
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="#">Eletrônicos</a></li>
                            <li><a class="dropdown-item" href="#">Moda</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#">Todos os Produtos</a></li>
                        </ul>
                    </li>
                </ul>
                 
                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="Buscar" aria-label="Search">
                    <button class="btn btn-outline-light" type="submit">Buscar</button>
                </form>
    
                <!-- Aula 10 -->
                <ul class="navbar-nav">
                    {% if user.is_authenticated %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'site_loja:perfil' %}">Perfil ({{ user.username }})</a>
                        </li>
                        <li class="nav-item">
                            <form action="{% url 'logout' %}" method="post" style="display: inline;">
                                {% csrf_token %} {# ESSENCIAL para segurança #}
                                <button type="submit" 
                                    class="nav-link btn btn-link" 
                                    >
                                    Sair
                                </button>
                            </form>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'login' %}">Entrar</a>
                        </li>                    
                    {% endif %}
                </ul>
                <!-- Aula 10 -->
                
            </div>
        </div>
    </nav>
    ```

    

      * **`{% block title %}` e `{% block content %}`**: 
        - São blocos onde os templates filhos podem inserir seu conteúdo.
      
      * **Links de Autenticação**: 
        - Adicionei links para login, logout e perfil na barra de navegação, condicionalmente, dependendo se o usuário está logado. 
        - Note que `{% url 'login' %}` e `{% url 'logout' %}` são URLs padrão do Django. Você pode precisar criar uma URL `register` se ainda não tiver.
      
      * **Exibindo Mensagens**: 
        - O bloco `{% if messages %}` exibe as mensagens (sucesso ou erro) que configuramos na view.

1. Crie o template `site_loja/templates/site_loja/perfil.html`:

    ```html
    {# Aula 10 #}
    {% extends 'site_loja/base.html' %}
    {% load static %} {# Carrega o template tag static para lidar com arquivos estáticos e de mídia #}

    {% block title %}Perfil de {{ user.username }}{% endblock %}

    {% block content %}
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card p-4">
                    <h2 class="mb-4 text-center">Perfil do Usuário</h2>
                    <form method="POST" enctype="multipart/form-data"> {# enctype="multipart/form-data" é ESSENCIAL para upload de arquivos #}
                        {% csrf_token %} {# Token de segurança do Django #}

                        <div class="row mb-3">
                            <div class="col-md-4 text-center">
                                <img src="{{ user.perfil.imagem.url }}" class="img-fluid rounded-circle mb-3" style="width: 150px; height: 150px; object-fit: cover;" alt="Imagem de Perfil">
                            </div>
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label for="{{ u_form.username.id_for_label }}" class="form-label">Nome de Usuário</label>
                                    {{ u_form.username }}
                                    {% for error in u_form.username.errors %}
                                        <div class="text-danger small">{{ error }}</div>
                                    {% endfor %}
                                </div>
                                <div class="mb-3">
                                    <label for="{{ u_form.email.id_for_label }}" class="form-label">Email</label>
                                    {{ u_form.email }}
                                    {% for error in u_form.email.errors %}
                                        <div class="text-danger small">{{ error }}</div>
                                    {% endfor %}
                                </div>
                                <div class="mb-3">
                                    <label for="{{ p_form.imagem.id_for_label }}" class="form-label">Atualizar Imagem de Perfil</label>
                                    {{ p_form.imagem }}
                                    {% for error in p_form.imagem.errors %}
                                        <div class="text-danger small">{{ error }}</div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary w-100">Atualizar Perfil</button>
                    </form>
                </div>
            </div>
        </div>
    {% endblock %}
    ```

      * **`{% extends 'site_loja/base.html' %}`**: 
        - Indica que este template herda do `base.html`.
      
      * **`{% load static %}`**: 
        - Permite usar o template tag `static` para lidar com arquivos estáticos (CSS, JS) e de mídia (imagens).
        
      * **`enctype="multipart/form-data"`**: 
        - **Este atributo é crucial\!** 
        - Ele informa ao navegador que o formulário está enviando dados que incluem arquivos, permitindo o upload da imagem.
        
      * **`{% csrf_token %}`**: 
        - Token de segurança do Django para proteger contra ataques CSRF (Cross-Site Request Forgery). 
        - Sempre inclua-o em formulários POST.
        
      * **`{{ user.perfil.imagem.url }}`**: 
        - Acessa a URL da imagem de perfil do usuário logado.
        
      * **`{{ u_form.username }}` e `{{ p_form.imagem }}`**: 
        - Renderizam os campos dos formulários. 
        - O Django automaticamente gera o HTML para os campos do formulário.
        
      * **`{% for error in u_form.username.errors %}`**: 
        - Exibe os erros de validação para cada campo do formulário.

### :seven: Conectando o Perfil na Criação do Usuário

O perfil do usuário é criado automaticamente quando um novo usuário é registrado. Para fazer isso, usaremos um `signal` do Django.

1. **Crie o arquivo `site_loja/signals.py`**:

    ```python
    # site_loja/signals.py - Aula 10

    from django.db.models.signals import post_save
    from django.contrib.auth.models import User
    from django.dispatch import receiver
    from .models import Perfil

    @receiver(post_save, sender=User)
    def criar_perfil(sender, instance, created, **kwargs):
        if created:
            Perfil.objects.create(usuario=instance)

    @receiver(post_save, sender=User)
    def salvar_perfil(sender, instance, **kwargs):
        instance.perfil.save()
    ```

      * **`post_save`**: 
        - Este é um `signal` do Django que é disparado toda vez que um objeto é salvo.
      * **`sender=User`**: 
        - Indicamos que queremos "ouvir" o `post_save` para o modelo `User`.
        
      * **`@receiver`**: 
        - Decorador que conecta a função ao `signal`.
      
      * **`criar_perfil(sender, instance, created, **kwargs)`**:
          * `instance`: É a instância do `User` que acabou de ser salva.
          * `created`: É um booleano que indica se o objeto foi criado (True) ou atualizado (False).
          * `if created:`: Se um novo usuário foi criado, criamos um `Perfil` associado a ele.
      * **`salvar_perfil`**: Este signal garante que o perfil do usuário seja salvo junto com o usuário, caso haja alguma alteração no perfil (ex: via admin).

1. **Registre os Signals no `apps.py` da aplicação `site_loja`**:
    Para que os `signals` funcionem, precisamos importá-los quando a aplicação é carregada.

    ```python
    # site_loja/apps.py

    from django.apps import AppConfig

    class SiteLojaConfig(AppConfig):
        default_auto_field = 'django.db.models.BigAutoField'
        name = 'site_loja'

        def ready(self):
            import site_loja.signals # Importa o arquivo de signals
    ```

### :eight: Testando o Sistema

Com todas as peças no lugar, é hora de testar\!

1. **Crie um superusuário (se ainda não tiver)**:

    ```bash
    python manage.py createsuperuser
    ```

1. **Inicie o servidor de desenvolvimento**:

    ```bash
    python manage.py runserver
    ```

1. **Acesse o Painel de Administração**: 
    -  Vá para `http://127.0.0.1:8000/admin/`.
    -  Você deve ver "Perfis" listado em "Site loja". 
    -  Tente criar um novo usuário e depois verifique se um perfil foi criado para ele.

1. **Acesse o Site da Loja**:

      * Vá para `http://127.0.0.1:8000/site/`.
      * Se você não tem um sistema de registro de usuários, crie um usuário pelo painel de administração e faça login.
      * Vá para `http://127.0.0.1:8000/site/perfil/`.
      * Tente atualizar seu nome de usuário, e-mail e fazer upload de uma nova imagem de perfil. Observe se a imagem é redimensionada.
