## 10.01.02 : Entendendo os Templates e Tags no Django

Imagine que vocÃª estÃ¡ construindo uma casa. VocÃª tem um projeto (o seu cÃ³digo Django) e quer que cada cÃ´modo (pÃ¡gina web) tenha uma aparÃªncia consistente, mas com detalhes que mudam (o conteÃºdo dinÃ¢mico). Ã‰ aÃ­ que entram os **templates** e as **tags** do Django.

Os **Templates** sÃ£o arquivos `HTML` com um "poder extra". Eles contÃªm a estrutura bÃ¡sica da sua pÃ¡gina (**cabeÃ§alho, rodapÃ©, menu**) e "buracos" onde o **conteÃºdo dinÃ¢mico** serÃ¡ inserido. Pense neles como moldes que vocÃª pode reutilizar vÃ¡rias vezes.

As **Tags** sÃ£o os "**ferramentas**" que vocÃª usa dentro desses moldes. Elas permitem que vocÃª faÃ§a coisas como exibir **variÃ¡veis**, executar **lÃ³gica** (como **loops** e **condiÃ§Ãµes**) e incluir outros templates.

## ğŸ§© Estrutura do Projeto e AplicaÃ§Ãµes

Vamos considerar a estrutura do seu projeto **`core`**:

```
core/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ settings.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â””â”€â”€ wsgi.py
â”œâ”€â”€ produtos/
â”‚   â”œâ”€â”€ migrations/
â”‚   â”œâ”€â”€ admin.py
â”‚   â”œâ”€â”€ apps.py
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ tests.py
â”‚   â””â”€â”€ views.py
â”œâ”€â”€ site_loja/
â”‚   â”œâ”€â”€ migrations/
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â””â”€â”€ site_loja/
â”‚   â”‚       â”œâ”€â”€ _partials/
â”‚   â”‚       â”‚   â”œâ”€â”€ _footer.html
â”‚   â”‚       â”‚   â””â”€â”€ _navbar.html
â”‚   â”‚       â”œâ”€â”€ home.html
â”‚   â”‚       â””â”€â”€ produtos_listar.html
â”‚   â”œâ”€â”€ admin.py
â”‚   â”œâ”€â”€ apps.py
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ tests.py
â”‚   â””â”€â”€ views.py
â”œâ”€â”€ manage.py
â””â”€â”€ db.sqlite3
```

Observe a pasta **`templates`** dentro de **`site_loja`**. Ã‰ aqui que todos os nossos arquivos de template residirÃ£o. A subpasta **`site_loja`** dentro de **`templates`** Ã© uma boa prÃ¡tica para evitar conflitos de nomes se vocÃª tiver templates com o mesmo nome em outras aplicaÃ§Ãµes. 

A pasta **`_partials`** armazena partes menores de cÃ³digo HTML que sÃ£o reutilizadas, como um menu de navegaÃ§Ã£o ou um rodapÃ©.

## O Conceito de Blocos

O conceito de **blocos** Ã© um recurso muito poderoso do Django que eleva a **reutilizaÃ§Ã£o de cÃ³digo** a outro nÃ­vel.

Imagine que vocÃª tem um **template** base para todas as suas pÃ¡ginas, que contÃ©m o cabeÃ§alho, o rodapÃ© e talvez alguns scripts. Se vocÃª precisar mudar o cabeÃ§alho, sem **blocos**, vocÃª teria que alterar cada arquivo de **template** individualmente. 

Com **blocos**, vocÃª define "**Ã¡reas**" no seu **template** base que podem ser sobrescritas por **templates "filhos"**.

Vamos criar um **template** base para o projeto `site_loja`. Dentro de `site_loja/templates/site_loja/`, crie um novo arquivo chamado `base.html`:

```html
{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Minha Loja Online{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    {% block extra_css %}{% endblock %}
</head>
<body>
    {% include 'site_loja/_partials/_navbar.html' %}

    <main class="container mt-4">
        {% block content %}
            {% endblock %}
    </main>

    {% include 'site_loja/_partials/_footer.html' %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
```

Neste `base.html`, vocÃª pode ver trÃªs tags de bloco:

  * `{% block title %}`: 
    - Este bloco define o tÃ­tulo padrÃ£o da pÃ¡gina. Se uma pÃ¡gina "filha" nÃ£o definir seu prÃ³prio tÃ­tulo, este serÃ¡ usado.
    
  * `{% block extra_css %}`: 
    - Um bloco vazio para que pÃ¡ginas filhas possam incluir CSS adicional especÃ­fico sem afetar o CSS global.
    
  * `{% block content %}`: 
    - Este Ã© o principal bloco onde o conteÃºdo exclusivo de cada pÃ¡gina serÃ¡ inserido.
    
  * `{% block extra_js %}`: 
    - Similar ao `extra_css`, para incluir JavaScript especÃ­fico.

Agora, vamos modificar seus **templates** `home.html` e `listar_produtos.html` para **estenderem** o `base.html` e utilizarem esses blocos.

### Modificando **`home.html`**

```html
{% extends 'site_loja/base.html' %}

{% block title %}PÃ¡gina Inicial - Minha Loja{% endblock %}

{% block extra_css %}
    {{ block.super }} 
    <style>
        .jumbotron {
            background-color: #f8f9fa;
            padding: 5rem;
            border-radius: .3rem;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="jumbotron text-center bg-light p-5 rounded">
        <h1 class="display-4">Bem-vindo Ã  nossa Loja Online!</h1>
        <p class="lead">Os melhores produtos, com os melhores preÃ§os.</p>
        <hr class="my-4">
        <p>Explore nossa seleÃ§Ã£o e encontre o que vocÃª procura.</p>
        <a class="btn btn-primary btn-lg" 
            href="{% url 'site_loja:produtos_lista' %}" 
            role="button">
            Ver Produtos
        </a>
    </div>

    <div class="row mt-5">
        <div class="col-md-4">
            <h3>Qualidade Garantida</h3>
            <p>Trabalhamos apenas com produtos de alta qualidade e fornecedores confiÃ¡veis.</p>
        </div>
        <div class="col-md-4">
            <h3>Entrega RÃ¡pida</h3>
            <p>Receba seus produtos no conforto da sua casa, com agilidade e seguranÃ§a.</p>
        </div>
        <div class="col-md-4">
            <h3>Suporte ao Cliente</h3>
            <p>Nossa equipe estÃ¡ sempre pronta para te ajudar com qualquer dÃºvida ou problema.</p>
        </div>
    </div>
{% endblock %}
```

Observe que:

  * **`{% extends 'site_loja/base.html' %}`**: 
    - Esta tag diz ao Django que este template **`home.html`** estÃ¡ usando **`base.html`** como seu modelo.
    
  * **`{% block title %}`**, **`{% block extra_css %}`** e **`{% block content %}`**: 
    - Agora, em vez de reescrever todo o HTML do **`base.html`**, vocÃª apenas sobrescreve as seÃ§Ãµes que deseja modificar. 
    - O restante (cabeÃ§alho, rodapÃ©, etc.) Ã© herdado do **`base.html`**.

## ğŸ“‹ Partial-Templates (**Partials**) e a Tag **`{% include %}`**

Os Partials sÃ£o pequenos pedaÃ§os de templates que vocÃª pode **reutilizar** em vÃ¡rias pÃ¡ginas. Em vez de copiar e colar o cÃ³digo para um menu de navegaÃ§Ã£o ou um rodapÃ© em cada pÃ¡gina, vocÃª o coloca em um partial e o **inclui** onde precisar.

Vamos garantir que seus **partials** estejam corretos:

### `_navbar.html`

```html
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="{% url 'site_loja:home' %}">Minha Loja</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="{% url 'site_loja:home' %}">InÃ­cio</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'site_loja:produtos_lista' %}">Produtos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Contato</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Categorias
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#">EletrÃ´nicos</a></li>
                        <li><a class="dropdown-item" href="#">Moda</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#">Todos os Produtos</a></li>
                    </ul>
                </li>
            </ul>
            <form class="d-flex" role="search">
                <input class="form-control me-2" type="search" placeholder="Buscar" aria-label="Search">
                <button class="btn btn-outline-light" type="submit">Buscar</button>
            </form>
        </div>
    </div>
</nav>
```

### `_footer.html`

```html
<footer class="bg-dark text-white pt-5 pb-4 mt-5">
    <div class="container text-center text-md-start">
        <div class="row text-center text-md-start">
            <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-3">
                <h5 class="text-uppercase mb-4 font-weight-bold text-warning">Minha Loja Online</h5>
                <p>Oferecendo os melhores produtos com qualidade e preÃ§o justo. Sua satisfaÃ§Ã£o Ã© nossa prioridade.</p>
            </div>

            <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
                <h5 class="text-uppercase mb-4 font-weight-bold text-warning">Links Ãšteis</h5>
                <p><a href="{% url 'site_loja:home' %}" class="text-white" style="text-decoration: none;">InÃ­cio</a></p>
                <p><a href="{% url 'site_loja:produtos_lista' %}" class="text-white" style="text-decoration: none;">Produtos</a></p>
                <p><a href="#" class="text-white" style="text-decoration: none;">Sobre NÃ³s</a></p>
                <p><a href="#" class="text-white" style="text-decoration: none;">PolÃ­tica de Privacidade</a></p>
            </div>

            <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mt-3">
                <h5 class="text-uppercase mb-4 font-weight-bold text-warning">Contato</h5>
                <p><i class="fas fa-home me-3"></i> Rua da Loja, 123 - Cidade/Estado</p>
                <p><i class="fas fa-envelope me-3"></i> contato@minhaloja.com</p>
                <p><i class="fas fa-phone me-3"></i> +55 (21) 98765-4321</p>
            </div>

            <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mt-3">
                <h5 class="text-uppercase mb-4 font-weight-bold text-warning">Redes Sociais</h5>
                <a href="#" class="btn btn-outline-light btn-floating m-1" role="button">
                    <i class="fab fa-facebook-f"></i> </a>
                <a href="#" class="btn btn-outline-light btn-floating m-1" role="button">
                    <i class="fab fa-twitter"></i> </a>
                <a href="#" class="btn btn-outline-light btn-floating m-1" role="button">
                    <i class="fab fa-instagram"></i> </a>
                <a href="#" class="btn btn-outline-light btn-floating m-1" role="button">
                    <i class="fab fa-linkedin-in"></i> </a>
            </div>

        </div>

        <hr class="mb-4">

        <div class="row align-items-center">
            <div class="col-md-7 col-lg-8">
                <p class="text-center text-md-start">Â© 2025 Minha Loja Online. Todos os direitos reservados.</p>
            </div>
            <div class="col-md-5 col-lg-4">
                <div class="text-center text-md-end">
                    <ul class="list-unstyled list-inline">
                        <li class="list-inline-item">
                            <a href="#" class="btn-floating btn-sm text-white" style="font-size: 23px;"><i class="fab fa-cc-visa"></i></a>
                        </li>
                        <li class="list-inline-item">
                            <a href="#" class="btn-floating btn-sm text-white" style="font-size: 23px;"><i class="fab fa-cc-mastercard"></i></a>
                        </li>
                        <li class="list-inline-item">
                            <a href="#" class="btn-floating btn-sm text-white" style="font-size: 23px;"><i class="fab fa-cc-paypal"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" 
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" 
    crossorigin="anonymous" referrerpolicy="no-referrer" />
```

A tag **`{% include 'site_loja/_partials/_navbar.html' %}`** no **`base.html`** faz o trabalho de inserir o conteÃºdo desses partials.

