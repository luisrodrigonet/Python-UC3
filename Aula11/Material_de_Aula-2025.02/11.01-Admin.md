# 11.01 - Aplica√ß√£o Admin do Django

## :one: Introdu√ß√£o ao Django Admin

O **Django Admin** √© uma das funcionalidades mais poderosas e distintas do framework Django. Trata-se de uma interface de administra√ß√£o completa, gerada automaticamente, que permite **gerenciar o conte√∫do** do seu site de forma intuitiva e eficiente. Esta ferramenta √© **destinada aos administradores do site**, n√£o aos visitantes comuns, e oferece uma maneira r√°pida de visualizar, adicionar, editar e excluir dados atrav√©s de uma interface web amig√°vel.

A grande vantagem do Django Admin √© que **ele l√™ os metadados dos seus modelos para fornecer uma interface r√°pida e centrada no modelo**, onde usu√°rios confi√°veis podem gerenciar o conte√∫do. Isso economiza tempo significativo no desenvolvimento, pois voc√™ n√£o precisa criar do zero uma interface administrativa para cada projeto.

## :two: Configura√ß√£o Inicial do Django Admin

### 2.1 Requisitos para Habilitar o Admin

Por padr√£o, o Django Admin **j√° vem habilitado** quando voc√™ cria um novo projeto usando o comando `startproject`. No entanto, √© importante entender os requisitos necess√°rios para que ele funcione corretamente:

**1. Aplica√ß√µes necess√°rias no INSTALLED_APPS:**

```python
# settings.py
INSTALLED_APPS = [
    'django.contrib.admin',        # Aplica√ß√£o admin principal
    'django.contrib.auth',         # Sistema de autentica√ß√£o
    'django.contrib.contenttypes', # Framework de tipos de conte√∫do
    'django.contrib.sessions',     # Framework de sess√µes
    'django.contrib.messages',     # Framework de mensagens
]
```

O **Django Admin** depende dessas aplica√ß√µes para funcionar corretamente. O `django.contrib.auth` fornece o sistema de usu√°rios e permiss√µes, o `django.contrib.contenttypes` permite trabalhar com diferentes tipos de modelos, e o `django.contrib.sessions` mant√©m as sess√µes dos usu√°rios logados.

**2. Configura√ß√£o dos templates:**

No arquivo `settings.py`, voc√™ precisa configurar o `backend` de **templates** com os processadores de contexto necess√°rios:

```python
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]
```

Esses processadores de contexto s√£o essenciais para que o **admin** tenha acesso √†s informa√ß√µes de requisi√ß√£o, autentica√ß√£o e mensagens.

**3. Configura√ß√£o das URLs:**

No arquivo principal `urls.py` do projeto, voc√™ precisa incluir as URLs do admin:

```python
# urls.py
from django.contrib import admin
from django.urls import path

urlpatterns = [
    path('admin/', admin.site.urls),
]
```

Isso mapeia o caminho `/admin/` para o site administrativo. Voc√™ pode acess√°-lo atrav√©s do navegador em `http://127.0.0.1:8000/admin/`.

### 2.2. Criando um Superusu√°rio

Para acessar o **Django Admin**, voc√™ precisa criar um **superusu√°rio (administrador)** com permiss√µes completas. O Django fornece um comando de gerenciamento espec√≠fico para isso:

```bash
python manage.py createsuperuser
```

Ao executar este comando, voc√™ ser√° solicitado a fornecer as seguintes informa√ß√µes:

```
Username: admin
Email address: admin@exemplo.com
Password: **********
Password (again): *********
Superuser created successfully.
```

**Varia√ß√µes do comando createsuperuser:**

Voc√™ pode fornecer argumentos diretamente na linha de comando para automatizar o processo:

```bash
# Especificando o nome de usu√°rio
python manage.py createsuperuser --username=admin

# Especificando o email
python manage.py createsuperuser --email=admin@exemplo.com

# Cria√ß√£o n√£o-interativa com senha via vari√°vel de ambiente
DJANGO_SUPERUSER_PASSWORD=senhasegura python manage.py createsuperuser --username=admin --email=admin@exemplo.com --noinput
```

A op√ß√£o `--noinput` (ou `--no-input`) instrui o Django a n√£o solicitar entrada do usu√°rio, sendo √∫til para scripts automatizados ou processos de integra√ß√£o cont√≠nua.

## :three: Registrando Modelos no Django Admin

### 3.1. Conceitos Fundamentais

Para que seus modelos apare√ßam na interface administrativa, voc√™ precisa **registr√°-los explicitamente** no arquivo `admin.py` da sua aplica√ß√£o. Vamos come√ßar com um exemplo simples.

**Exemplo de modelo:**

```python
# models.py
from django.db import models

class Livro(models.Model):
    titulo = models.CharField(max_length=200, verbose_name="T√≠tulo")
    autor = models.CharField(max_length=100, verbose_name="Autor")
    isbn = models.CharField(max_length=13, unique=True, verbose_name="ISBN")
    data_publicacao = models.DateField(verbose_name="Data de Publica√ß√£o")
    preco = models.DecimalField(max_digits=6, decimal_places=2, verbose_name="Pre√ßo")
    disponivel = models.BooleanField(default=True, verbose_name="Dispon√≠vel")
    
    class Meta:
        verbose_name = "Livro"
        verbose_name_plural = "Livros"
        ordering = ['titulo']
    
    def __str__(self):
        return self.titulo
```

Note o uso dos atributos `verbose_name` e `verbose_name_plural` na classe `Meta`. Esses atributos definem como o modelo ser√° exibido no admin em portugu√™s, tornando a interface mais amig√°vel.

### 3.2. Formas de Registro

**1. Registro B√°sico:**

A forma mais simples de registrar um modelo √© usar o m√©todo `admin.site.register()`:

```python
# admin.py
from django.contrib import admin
from .models import Livro

admin.site.register(Livro)
```

Esta abordagem registra o modelo com as configura√ß√µes padr√£o, mas oferece funcionalidades limitadas.

**2. Registro com ModelAdmin:**

Para personalizar a interface administrativa, voc√™ **cria uma classe que herda** de `admin.ModelAdmin` e a registra junto com o modelo:

```python
# admin.py
from django.contrib import admin
from .models import Livro

class LivroAdmin(admin.ModelAdmin):
    list_display = ('titulo', 'autor', 'data_publicacao', 'preco', 'disponivel')
    list_filter = ('disponivel', 'data_publicacao')
    search_fields = ('titulo', 'autor', 'isbn')
    ordering = ['-data_publicacao']

admin.site.register(Livro, LivroAdmin)
```

**3. Registro com Decorator:**

O Django oferece uma forma mais elegante usando o **decorator** `@admin.register`:

```python
# admin.py
from django.contrib import admin
from .models import Livro

@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    list_display = ('titulo', 'autor', 'data_publicacao', 'preco', 'disponivel')
    list_filter = ('disponivel', 'data_publicacao')
    search_fields = ('titulo', 'autor', 'isbn')
    ordering = ['-data_publicacao']
```

Esta abordagem √© considerada mais pyth√¥nica e clara, pois **associa visualmente a classe admin ao modelo atrav√©s do decorator**.

**4. Registrando M√∫ltiplos Modelos:**

Voc√™ pode registrar v√°rios modelos de uma vez:

```python
# M√©todo 1: Lista de modelos
modelos = [Livro, Autor, Editora]
admin.site.register(modelos)

# M√©todo 2: Usando decorator para m√∫ltiplos modelos
@admin.register(Livro, Autor, Editora)
class AdminComum(admin.ModelAdmin):
    pass
```

## :four: Personalizando a Interface do Admin com ModelAdmin

A classe `ModelAdmin` possui mais de **30 atributos** e quase **50 m√©todos** que voc√™ pode utilizar para personalizar a interface administrativa. Vamos explorar os mais importantes para criar uma experi√™ncia rica para os usu√°rios.

### 4.1 `list_display`: Controlando Colunas Exibidas

O atributo `list_display` controla quais campos do modelo s√£o exibidos como colunas na p√°gina de listagem:

```python
@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    list_display = ('titulo', 'autor', 'data_publicacao', 'preco', 'disponivel', 'get_status_estoque')
    
    @admin.display(description='Status do Estoque')
    def get_status_estoque(self, obj):
        if obj.disponivel:
            return "‚úì Em estoque"
        return "‚úó Esgotado"
```

**Voc√™ pode incluir**:
- Campos do modelo (`titulo`, `autor`)
- M√©todos do modelo
- M√©todos do `ModelAdmin` (como `get_status_estoque` acima)
- Propriedades decoradas com `@property`

O decorator `@admin.display` permite **configurar como o m√©todo √© exibido**, incluindo a descri√ß√£o da coluna, se √© orden√°vel, e mais.

### 4.2 `list_filter`: Adicionando Filtros

O `list_filter` adiciona uma **barra lateral com filtros** para **facilitar a navega√ß√£o** pelos dados:

```python
@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    list_display = ('titulo', 'autor', 'data_publicacao', 'disponivel')
    list_filter = ('disponivel', 'data_publicacao', 'autor')
```

Voc√™ tamb√©m pode criar filtros personalizados usando `SimpleListFilter`:

```python
from django.contrib import admin

class FiltroPorDecada(admin.SimpleListFilter):
    title = 'd√©cada'
    parameter_name = 'decada'
    
    def lookups(self, request, model_admin):
        return (
            ('2020s', 'Anos 2020'),
            ('2010s', 'Anos 2010'),
            ('2000s', 'Anos 2000'),
        )
    
    def queryset(self, request, queryset):
        if self.value() == '2020s':
            return queryset.filter(data_publicacao__year__gte=2020)
        if self.value() == '2010s':
            return queryset.filter(data_publicacao__year__gte=2010, 
                                  data_publicacao__year__lt=2020)
        if self.value() == '2000s':
            return queryset.filter(data_publicacao__year__gte=2000, 
                                  data_publicacao__year__lt=2010)

@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    list_filter = (FiltroPorDecada, 'disponivel')
```

### 4.3 `search_fields`: Funcionalidade de Busca

O atributo `search_fields` adiciona uma **barra de pesquisa** na parte superior da lista:

```python
@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    search_fields = ('titulo', 'autor', 'isbn')
    # Voc√™ tamb√©m pode pesquisar em campos relacionados
    # search_fields = ('autor__nome', 'editora__nome')
```

Quando voc√™ digita na barra de pesquisa, o Django procura em todos os campos especificados em `search_fields`, retornando resultados que correspondem a qualquer um deles.

### 4.4 `fields` e `fieldsets`: Organizando Formul√°rios

**fields:** Controla quais campos aparecem no formul√°rio e em qual ordem:

```python
@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    fields = ['titulo', 'autor', 'isbn', ('preco', 'disponivel'), 'data_publicacao']
```

Quando voc√™ agrupa campos em tuplas (como `('preco', 'disponivel')`), eles aparecem na mesma linha.

**fieldsets:** Oferece controle mais avan√ßado, permitindo agrupar campos em se√ß√µes com t√≠tulos:

```python
@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    fieldsets = (
        ('Informa√ß√µes B√°sicas', {
            'fields': ('titulo', 'autor', 'isbn')
        }),
        ('Detalhes de Publica√ß√£o', {
            'fields': ('data_publicacao', 'editora'),
            'classes': ('collapse',),  # Se√ß√£o recolh√≠vel
        }),
        ('Informa√ß√µes Comerciais', {
            'fields': (('preco', 'disponivel'),),
            'description': 'Informa√ß√µes sobre pre√ßo e disponibilidade'
        }),
    )
```

A op√ß√£o `'classes': ('collapse',)` torna a se√ß√£o recolh√≠vel, √∫til para formul√°rios com muitos campos.

### 4.5 `readonly_fields`: Campos Somente Leitura

Use `readonly_fields` para exibir campos que n√£o devem ser edit√°veis:

```python
@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    readonly_fields = ('data_criacao', 'data_atualizacao', 'get_tempo_desde_publicacao')
    
    @admin.display(description='Tempo desde publica√ß√£o')
    def get_tempo_desde_publicacao(self, obj):
        from django.utils import timezone
        if obj.data_publicacao:
            dias = (timezone.now().date() - obj.data_publicacao).days
            anos = dias // 365
            return f"{anos} anos e {dias % 365} dias"
        return "N√£o publicado"
```

### 4.5 `date_hierarchy`: Navega√ß√£o por Data

O `date_hierarchy` adiciona uma navega√ß√£o `drill-down` baseada em datas na parte superior da lista:

```python
@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    date_hierarchy = 'data_publicacao'
```

Isso cria uma navega√ß√£o hier√°rquica por **ano > m√™s > dia**, facilitando encontrar registros por per√≠odo.

### 4.6 `ordering`: Ordena√ß√£o Padr√£o

Define a ordena√ß√£o padr√£o dos objetos na lista:

```python
@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    ordering = ['-data_publicacao', 'titulo']  # Mais recente primeiro, depois por t√≠tulo
```

### 4.7 `list_per_page`: Pagina√ß√£o

Controla quantos itens s√£o exibidos por p√°gina:

```python
@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    list_per_page = 25  # Padr√£o √© 100
```

## :five:  Django Admin Inlines

Os **Inlines** permitem editar modelos relacionados na mesma p√°gina do modelo pai, oferecendo uma experi√™ncia mais fluida. O Django oferece dois tipos principais de inlines:

### 5.1 `TabularInline`: Layout Tabular

O `TabularInline` exibe os objetos relacionados em formato de tabela, adequado quando h√° poucos campos:

```python
# models.py
class Editora(models.Model):
    nome = models.CharField(max_length=200)
    
    def __str__(self):
        return self.nome

class Livro(models.Model):
    titulo = models.CharField(max_length=200)
    editora = models.ForeignKey(Editora, on_delete=models.CASCADE, 
                                related_name='livros')
    autor = models.CharField(max_length=100)
    
    def __str__(self):
        return self.titulo

# admin.py
from django.contrib import admin

class LivroInline(admin.TabularInline):
    model = Livro
    extra = 1  # N√∫mero de formul√°rios vazios extras a exibir
    fields = ('titulo', 'autor')
    
@admin.register(Editora)
class EditoraAdmin(admin.ModelAdmin):
    list_display = ('nome',)
    inlines = [LivroInline]
```

### 5.2. StackedInline: Layout Empilhado

O `StackedInline` exibe cada objeto relacionado em **formato empilhado (vertical)**, melhor quando h√° muitos campos:

```python
class LivroInline(admin.StackedInline):
    model = Livro
    extra = 1
    fieldsets = (
        ('Informa√ß√µes B√°sicas', {
            'fields': ('titulo', 'autor')
        }),
        ('Detalhes', {
            'fields': ('isbn', 'data_publicacao', 'preco'),
            'classes': ('collapse',)
        }),
    )

@admin.register(Editora)
class EditoraAdmin(admin.ModelAdmin):
    inlines = [LivroInline]
```

### 5.3 Configura√ß√µes Avan√ßadas de Inlines

```python
class LivroInline(admin.TabularInline):
    model = Livro
    extra = 2                          # Formul√°rios vazios extras
    max_num = 10                       # M√°ximo de objetos inline
    min_num = 1                        # M√≠nimo de objetos inline
    can_delete = True                  # Permitir exclus√£o
    show_change_link = True            # Mostrar link para p√°gina de edi√ß√£o
    readonly_fields = ('data_criacao',)
    fields = ('titulo', 'autor', 'preco', 'data_criacao')
```

A op√ß√£o `show_change_link = True` adiciona um link ao lado de cada objeto inline que leva √† sua p√°gina de edi√ß√£o individual, muito √∫til para edi√ß√µes mais complexas.

### 5.4 Inlines para Relacionamentos Many-to-Many

Para relacionamentos muitos-para-muitos, voc√™ precisa usar a tabela intermedi√°ria:

```python
# models.py
class Autor(models.Model):
    nome = models.CharField(max_length=100)

class Livro(models.Model):
    titulo = models.CharField(max_length=200)
    autores = models.ManyToManyField(Autor, related_name='livros')

# admin.py
class AutorInline(admin.TabularInline):
    model = Livro.autores.through  # Refer√™ncia √† tabela intermedi√°ria
    extra = 1
    verbose_name_plural = "Autores"

@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    inlines = [AutorInline]
    exclude = ('autores',)  # Exclui o campo padr√£o M2M
```

## :six: `Admin Actions`: Opera√ß√µes em Lote

As `Admin Actions` permitem executar opera√ß√µes em m√∫ltiplos objetos selecionados de uma vez. Por padr√£o, o Django fornece uma action para deletar objetos selecionados.

### 6.1 Criando `Custom Actions`

```python
from django.contrib import admin
from django.utils.html import format_html

@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    list_display = ('titulo', 'autor', 'disponivel')
    actions = ['marcar_como_disponivel', 'marcar_como_indisponivel', 'aplicar_desconto']
    
    @admin.action(description='Marcar selecionados como dispon√≠veis')
    def marcar_como_disponivel(self, request, queryset):
        count = queryset.update(disponivel=True)
        self.message_user(request, f'{count} livro(s) marcado(s) como dispon√≠vel.')
    
    @admin.action(description='Marcar selecionados como indispon√≠veis')
    def marcar_como_indisponivel(self, request, queryset):
        count = queryset.update(disponivel=False)
        self.message_user(request, f'{count} livro(s) marcado(s) como indispon√≠vel.')
    
    @admin.action(description='Aplicar 10% de desconto')
    def aplicar_desconto(self, request, queryset):
        for livro in queryset:
            livro.preco = livro.preco * 0.9
            livro.save()
        self.message_user(request, f'Desconto aplicado em {queryset.count()} livro(s).')
```

O decorator `@admin.action` aceita o par√¢metro `description` que define o texto exibido no menu dropdown de a√ß√µes.

### 6.2 Actions com Permiss√µes

Voc√™ pode restringir a√ß√µes com base em permiss√µes do usu√°rio:

```python
@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    actions = ['publicar_livros']
    
    @admin.action(
        permissions=['change'],  # Requer permiss√£o de mudan√ßa
        description='Publicar livros selecionados'
    )
    def publicar_livros(self, request, queryset):
        queryset.update(publicado=True)
        self.message_user(request, f'{queryset.count()} livro(s) publicado(s).')
```

As permiss√µes dispon√≠veis s√£o: `'add'`, `'change'`, `'delete'`, e `'view'`.

### 6.3 Desabilitando Actions

Para desabilitar todas as actions (incluindo a de deletar):

```python
@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    actions = None
```

Para desabilitar apenas a action de deletar:

```python
@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    def get_actions(self, request):
        actions = super().get_actions(request)
        if 'delete_selected' in actions:
            del actions['delete_selected']
        return actions
```

## :seven: Controlando Permiss√µes no Admin

O Django fornece m√©todos para controlar granularmente o que os usu√°rios podem fazer no admin:

```python
@admin.register(Livro)
class LivroAdmin(admin.ModelAdmin):
    
    def has_add_permission(self, request):
        # Apenas superusu√°rios podem adicionar livros
        return request.user.is_superuser
    
    def has_change_permission(self, request, obj=None):
        # Editores podem editar, mas n√£o seus pr√≥prios livros
        if obj is not None and hasattr(request.user, 'editor'):
            return obj.autor != request.user.editor.nome
        return request.user.has_perm('biblioteca.change_livro')
    
    def has_delete_permission(self, request, obj=None):
        # Apenas gerentes podem deletar
        return request.user.groups.filter(name='Gerentes').exists()
    
    def has_view_permission(self, request, obj=None):
        # Todos os usu√°rios autenticados podem visualizar
        return request.user.is_authenticated
    
    def has_module_permission(self, request):
        # Controla se o m√≥dulo aparece no admin
        return request.user.is_staff
```

Esses m√©todos retornam `True` ou `False` baseado em suas regras de neg√≥cio, permitindo um controle fino sobre o acesso.

## :eight: Comandos de Gerenciamento do Django

O Django fornece uma rica cole√ß√£o de comandos de gerenciamento atrav√©s do utilit√°rio `manage.py` e `django-admin`. Vamos explorar os comandos mais importantes, especialmente aqueles relacionados √† administra√ß√£o.

### 8.1 Comandos Fundamentais do Projeto

ü§ñ `startproject`: **Criando um Novo Projeto**

```bash
django-admin startproject meu_projeto
```

Este comando cria a estrutura b√°sica de um projeto Django, incluindo arquivos de configura√ß√£o, URLs e o script `manage.py`.

ü§ñ `startapp`: **Criando uma Nova Aplica√ß√£o**

```bash
python manage.py startapp minha_app
```

Cria uma nova aplica√ß√£o Django dentro do projeto, com estrutura padr√£o incluindo `models.py`, `views.py`, `admin.py`, etc.

### 8.2 Comandos de Banco de Dados

ü§ñ `makemigrations`: **Criando Migra√ß√µes**

```bash
python manage.py makemigrations
```

Examina seus modelos e cria arquivos de migra√ß√£o para as mudan√ßas detectadas. Voc√™ pode especificar uma aplica√ß√£o:

```bash
python manage.py makemigrations minha_app
```

Op√ß√µes √∫teis:
- `--empty`: Cria uma migra√ß√£o vazia para edi√ß√£o manual
- `--dry-run`: Mostra o que seria criado sem criar os arquivos
- `--name NOME`: Define um nome personalizado para a migra√ß√£o

ü§ñ `migrate`: **Aplicando Migra√ß√µes**

```bash
python manage.py migrate
```

Aplica as migra√ß√µes ao banco de dados, criando ou alterando tabelas conforme necess√°rio.

Op√ß√µes:
- `--database DATABASE`: Especifica qual banco de dados usar
- `--fake`: Marca migra√ß√µes como aplicadas sem execut√°-las
- `python manage.py migrate minha_app 0005`: Migra at√© uma migra√ß√£o espec√≠fica

ü§ñ `showmigrations`: **Visualizando Status das Migra√ß√µes**

```bash
python manage.py showmigrations
```

Exibe todas as migra√ß√µes e quais foram aplicadas (marcadas com [X]).

ü§ñ `sqlmigrate`: **Visualizando SQL Gerado**

```bash
python manage.py sqlmigrate minha_app 0001
```

Mostra os comandos SQL que ser√£o executados para uma migra√ß√£o espec√≠fica.

ü§ñ `inspectdb`: **Gerando Models de BD Existente**

```bash
python manage.py inspectdb > models.py
```

Examina um banco de dados existente e gera c√≥digo de modelos Django. Muito √∫til quando voc√™ est√° integrando Django com um banco de dados legado.

Op√ß√µes:
- `--database DATABASE`: Especifica o banco de dados a inspecionar
- `--include-views`: Inclui views do banco de dados
- `inspectdb tabela1 tabela2`: Inspeciona apenas tabelas espec√≠ficas

### 8.3 Comandos de Administra√ß√£o de Usu√°rios

ü§ñ `createsuperuser`: **Criando Superusu√°rio**

```bash
python manage.py createsuperuser
```

Cria um usu√°rio com todas as permiss√µes para acessar o admin. Como vimos anteriormente, aceita v√°rias op√ß√µes:

```bash
# Com par√¢metros
python manage.py createsuperuser --username=admin --email=admin@exemplo.com

# N√£o-interativo
DJANGO_SUPERUSER_PASSWORD=senha python manage.py createsuperuser --noinput --username=admin --email=admin@exemplo.com
```

ü§ñ `changepassword`: **Alterando Senha**

```bash
python manage.py changepassword nome_usuario
```

Permite alterar a senha de um usu√°rio espec√≠fico.

### 8.4 Comandos de Servidor e Desenvolvimento

ü§ñ `runserver`: **Iniciando Servidor de Desenvolvimento**

```bash
python manage.py runserver
```

Inicia o servidor de desenvolvimento Django. Por padr√£o, roda em `http://127.0.0.1:8000`.

Op√ß√µes:
```bash
python manage.py runserver 8080              # Porta diferente
python manage.py runserver 0.0.0.0:8000     # Aceita conex√µes externas
python manage.py runserver --noreload        # Sem recarga autom√°tica
```

ü§ñ `shell`: **Console Interativo**

```bash
python manage.py shell
```

Abre um shell Python interativo com o ambiente Django carregado. No Django 5.2+, os modelos s√£o importados automaticamente:

```bash
python manage.py shell --verbosity=2
# Exibe: 6 objects imported automatically, including:
# from django.contrib.admin.models import LogEntry
# from django.contrib.auth.models import Group, Permission, User
```

ü§ñ `dbshell`: **Console do Banco de Dados**

```bash
python manage.py dbshell
```

Abre o cliente de linha de comando do banco de dados configurado. √ötil para executar SQL diretamente:

```bash
python manage.py dbshell -- -c "SELECT * FROM auth_user LIMIT 5;"
```

### 8.5 Comandos de Arquivos Est√°ticos

ü§ñ `collectstatic`: **Coletando Arquivos Est√°ticos**

```bash
python manage.py collectstatic
```

Coleta todos os arquivos est√°ticos de suas aplica√ß√µes em um √∫nico diret√≥rio definido por `STATIC_ROOT`. Essencial para deploy em produ√ß√£o.

Op√ß√µes:
- `--noinput`: N√£o pede confirma√ß√£o
- `--clear`: Limpa arquivos existentes antes de copiar
- `--dry-run`: Simula sem copiar arquivos
- `--link`: Cria links simb√≥licos em vez de copiar

ü§ñ `findstatic`: **Encontrando Arquivos Est√°ticos**

```bash
python manage.py findstatic arquivo.css
```

Localiza onde um arquivo est√°tico espec√≠fico est√° armazenado.

### 8.6 Comandos de Limpeza e Manuten√ß√£o

ü§ñ `flush`: **Limpando Banco de Dados**

```bash
python manage.py flush
```

Remove todos os dados do banco de dados, mantendo a estrutura das tabelas.

ü§ñ `clearsessions`: **Limpando Sess√µes Expiradas**

```bash
python manage.py clearsessions
```

Remove sess√µes expiradas do banco de dados.

ü§ñ `createcachetable`: **Criando Tabela de Cache**

```bash
python manage.py createcachetable
```

Cria a tabela necess√°ria para o backend de cache em banco de dados.

### 8.6 Comandos de Testes

ü§ñ `test`: **Executando Testes**

```bash
python manage.py test
```

Executa todos os testes do projeto. Voc√™ pode especificar aplica√ß√µes ou testes espec√≠ficos:

```bash
python manage.py test minha_app
python manage.py test minha_app.tests.MeuTesteCase
python manage.py test --keepdb  # Mant√©m o banco de testes
```

### 8.7 Comandos Utilit√°rios

ü§ñ `check`: **Verificando Problemas**

```bash
python manage.py check
```

Verifica todo o projeto Django em busca de problemas comuns.

Op√ß√µes:
- `--deploy`: Executa verifica√ß√µes adicionais relevantes para deploy
- `--database default`: Verifica configura√ß√µes de banco de dados
- `--tag models`: Verifica apenas aspectos espec√≠ficos

ü§ñ `diffsettings`: **Comparando Configura√ß√µes**

```bash
python manage.py diffsettings
```

Mostra as diferen√ßas entre suas configura√ß√µes atuais e as configura√ß√µes padr√£o do Django.

ü§ñ `sendtestemail`: **Testando Email**

```bash
python manage.py sendtestemail destinatario@exemplo.com
```

Envia um email de teste para verificar a configura√ß√£o de email.

### 8.8 Criando Comandos Personalizados

Voc√™ pode criar seus pr√≥prios comandos de gerenciamento. Crie a estrutura de diret√≥rios:

```
minha_app/
    management/
        __init__.py
        commands/
            __init__.py
            meu_comando.py
```

Conte√∫do de `meu_comando.py`:

```python
from django.core.management.base import BaseCommand
from django.utils import timezone

class Command(BaseCommand):
    help = 'Exibe a data e hora atual'
    
    def add_arguments(self, parser):
        parser.add_argument(
            '--saudacao',
            type=str,
            help='Mensagem de sauda√ß√£o personalizada',
        )
    
    def handle(self, *args, **options):
        agora = timezone.now().strftime('%d/%m/%Y %H:%M:%S')
        saudacao = options.get('saudacao', 'Ol√°')
        
        self.stdout.write(
            self.style.SUCCESS(f'{saudacao}! A hora atual √©: {agora}')
        )
```

Uso:

```bash
python manage.py meu_comando
python manage.py meu_comando --saudacao="Bom dia"
```

### 8.9 Comandos Combinados para Fluxo de Trabalho

Em um fluxo t√≠pico de desenvolvimento, voc√™ frequentemente usa estes comandos em sequ√™ncia:

```bash
# 1. Criar migra√ß√µes ap√≥s alterar modelos
python manage.py makemigrations

# 2. Aplicar migra√ß√µes ao banco de dados
python manage.py migrate

# 3. Coletar arquivos est√°ticos
python manage.py collectstatic --noinput

# 4. Criar superusu√°rio (apenas primeira vez)
python manage.py createsuperuser

# 5. Iniciar servidor de desenvolvimento
python manage.py runserver
```



