# Aula: Visualizando Conteúdos da Loja

Nesta aula, usaremos o conteúdo das tabelas que foram inseridas de maneira manual e que deverão ser colocadas e exibidas na página “template”.  

## Objetivo

Permitir que os usuários naveguem e visualizem as **categorias**, **produtos**, **clientes** usando Views baseadas em classe, renderizando templates HTML e configurando as URLs adequadamente.

## :one: Views baseadas em classe

No arquivo `views.py` do app **produtos**, crie as views para listar e detalhar os principais objetos.

```python
from django.shortcuts import render

# Class Base Views Gnéricas
from django.views.generic import ListView, DetailView

# Utilizado no processo de autorização
from django.contrib.auth.mixins import LoginRequiredMixin # <-- Utilizado nas CBV
from django.contrib.auth.decorators import login_required # <-- Utilizado nas FBV
from django.utils.decorators import method_decorator

# Modelos para os quais as Views serão criadas
from .models import (
    Categoria,
    Produto,
    Cliente,
    EnderecoEntrega,
    Pedido,
    ItemPedido,
    ComentarioAvaliacao,
)


##============================================================================
# Clase - Categorias
##============================================================================


##
# Categoria - List - Versão Completa
##
# class CategoriaListView(ListView):
#     """Lista todas as categorias de produtos"""
#
#     model = Categoria
#     template_name = "produtos/categorias/categoria_list.html"
#     context_object_name = "categorias"
#     paginate_by = 10  # Paginação para melhor performance
#
#     def get_context_data(self, **kwargs):
#         """Adiciona contexto extra para o template"""
#         context = super().get_context_data(**kwargs)
#         context["total_categorias"] = Categoria.objects.count()
#         return context



##
# Categoria - List - Versão Simples
##
class CategoriaListView(ListView):
    model = Categoria
    template_name = "produtos/categorias/categoria_list_simples.html"
    context_object_name = "categorias"


##
# Categoria - Detail - Versão Completa
##
# class CategoriaDetailView(DetailView):
#     """Detalhes de uma categoria específica"""
#
#     model = Categoria
#     template_name = "produtos/categorias/categoria_detail.html"
#     context_object_name = "categoria"
#
#     def get_context_data(self, **kwargs):
#         """Inclui os produtos relacionados à categoria"""
#         context = super().get_context_data(**kwargs)
#         context["produtos"] = self.object.produtos.all()[:12]  # Primeiros 12 produtos
#         context["total_produtos"] = self.object.produtos.count()
#         return context


##
# Categoria - Detail - Versão Simples
##
class CategoriaDetailView(DetailView):
    model = Categoria
    template_name = "produtos/categorias/categoria_detail_simples.html"
    context_object_name = "categoria"


##============================================================================
# Classe - Produtos
##============================================================================

##
# Produtos - List - Versão Completa
##
# class ProdutoListView(ListView):
#     """Lista todos os produtos disponíveis"""
#
#     model = Produto
#     template_name = "produtos/produtos/produto_list.html"
#     context_object_name = "produtos"
#     paginate_by = 12  # Ideal para grid de produtos
#
#     def get_queryset(self):
#         """Filtra apenas produtos com estoque > 0 por padrão"""
#         return Produto.objects.filter(estoque__gt=0).select_related("categoria")
#
#     def get_context_data(self, **kwargs):
#         """Adiciona estatísticas e categorias para filtros"""
#         context = super().get_context_data(**kwargs)
#         context["categorias"] = Categoria.objects.all()
#         context["produtos_em_estoque"] = Produto.objects.filter(estoque__gt=0).count()
#         context["produtos_esgotados"] = Produto.objects.filter(estoque=0).count()
#         return context


##
# Produtos - List -  Versão Simples
##
class ProdutoListView(ListView):
    model = Produto
    template_name = "produtos/produtos/produto_list_simples.html"
    context_object_name = "produtos"

# class ProdutoDetailView(DetailView):
#     model = Produto
#     template_name = 'produto_detail.html'
#     context_object_name = 'produto'

##
# Produtos - Detail - Versão Completa
##
# class ProdutoDetailView(DetailView):
#     """Página de detalhes do produto"""
#
#     model = Produto
#     template_name = "produtos/produtos/produto_detail.html"
#     context_object_name = "produto"
#
#     def get_queryset(self):
#         """Otimiza consultas com prefetch_related"""
#         return Produto.objects.select_related("categoria").prefetch_related(
#             "comentarios__cliente"
#         )
#
#     def get_context_data(self, **kwargs):
#         """Inclui comentários, avaliações e produto similar"""
#         context = super().get_context_data(**kwargs)
#         produto = self.object
#
#         # Média das avaliações
#         comentarios = produto.comentarios.all()
#         if comentarios.exists():
#             context["avaliacao_media"] = (
#                 sum(c.avaliacao for c in comentarios) / comentarios.count()
#             )
#             context["total_comentarios"] = comentarios.count()
#         else:
#             context["avaliacao_media"] = 0
#             context["total_comentarios"] = 0
#
#         # Produtos similares (mesma categoria)
#         context["produtos_similares"] = Produto.objects.filter(
#             categoria=produto.categoria
#         ).exclude(id=produto.id)[:4]
#
#         return context


##
# Produtos - Detail - Versão Simplificada
##
class ProdutoDetailView(DetailView):
    model = Produto
    template_name = "produtos/produtos/produto_detail_simples.html"
    context_object_name = "produto"


##============================================================================
# Classe - Clientes
##============================================================================

##
# Clientes - List
##
class ClienteListView(LoginRequiredMixin, ListView):
    """Lista de todos os clientes (apenas para administradores)"""

    model = Cliente
    template_name = "produtos/clientes/cliente_list.html"
    context_object_name = "clientes"
    login_url = "/accounts/login/"

    def get_queryset(self):
        """Otimiza com select_related para o user"""
        return Cliente.objects.select_related("user").all()

##
# Clientes - Details - Simples
##
class ClienteDetailView(DetailView):
    model = Cliente
    template_name = "produtos/clientes/cliente_detail_basico.html"
    context_object_name = "cliente"

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context["enderecos"] = self.object.enderecos.all()
        return context

##
# Clientes - Details - Completo
##
# class ClienteDetailView(LoginRequiredMixin, DetailView):
#     """Perfil detalhado do cliente"""
#
#     model = Cliente
#     template_name = "produtos/clientes/cliente_detail.html"
#     context_object_name = "cliente"
#     login_url = "/accounts/login/"
#
#     def get_queryset(self):
#         """Otimiza todas as consultas relacionadas"""
#         return Cliente.objects.select_related("user").prefetch_related(
#             "enderecos", "pedidos__itens__produto", "comentarios__produto"
#         )
#
#     def get_context_data(self, **kwargs):
#         """Contexto completo do perfil do cliente"""
#         context = super().get_context_data(**kwargs)
#         cliente = self.object
#
#         # Estatísticas do cliente
#         context["total_pedidos"] = cliente.pedidos.count()
#         context["total_enderecos"] = cliente.enderecos.count()
#         context["total_comentarios"] = cliente.comentarios.count()
#
#         # Últimos pedidos
#         context["ultimos_pedidos"] = cliente.pedidos.all().order_by("-data_pedido")[:5]
#
#         # Endereços principais
#         context["enderecos"] = cliente.enderecos.all()
#
#         return context


```

## :two: Configuração das URLs

No arquivo `urls.py` **do app**, defina as rotas para as views:

```python 
from django.urls import path
from . import views

app_name = 'produtos'  # <-- Namespace obrigatório para evitar conflitos

urlpatterns = [
    # CATEGORIAS
    path(
        "categorias/",
        views.CategoriaListView.as_view(),
        name="categoria_list",
    ),
    path(
        "categorias/<int:pk>/",
        views.CategoriaDetailView.as_view(),
        name="categoria_detail",
    ),
    # PRODUTOS
    path(
        "",
        views.ProdutoListView.as_view(),
        name="produto_list",
    ),
    path(
        "produtos/<int:pk>/",
        views.ProdutoDetailView.as_view(),
        name="produto_detail",
    ),
    # CLIENTES (apenas admin logado)
    path(
        "clientes/",
        views.ClienteListView.as_view(),
        name="cliente_list",
    ),
    path(
        "clientes/<int:pk>/",
        views.ClienteDetailView.as_view(),
        name="cliente_detail",
    ),

    # PEDIDOS (apenas usuário logado)
    # path('pedidos/', views.PedidoListView.as_view(), name='pedido_list'),
    # path('pedidos/<int:pk>/', views.PedidoDetailView.as_view(),
    #     name='pedido_detail'),
]
```

No arquivo `urls.py` principal **do projeto**, inclua as urls do app:

```python
from django.urls import path, include

urlpatterns = [
    # outras urls
    path('produtos/', include('produtos.urls')),
]
```

URLs Geradas Automaticamente**

Com essa configuração, você terá estas URLs funcionando:

| URL | Nome | View | Descrição |
|-----|------|------|-----------|
| `/produtos/` | `produto_list` | ProdutoListView | Lista de produtos (página inicial) |
| `/produtos/produtos/5/` | `produto_detail` | ProdutoDetailView | Detalhes do produto ID 5 |
| `/produtos/categorias/` | `categoria_list` | CategoriaListView | Todas as categorias |
| `/produtos/categorias/3/` | `categoria_detail` | CategoriaDetailView | Categoria ID 3 + produtos |
| `/produtos/clientes/` | `cliente_list` | ClienteListView | Lista clientes (requer login) |
| `/produtos/clientes/1/` | `cliente_detail` | ClienteDetailView | Perfil cliente ID 1 |
| `/produtos/pedidos/` | `pedido_list` | PedidoListView | Meus pedidos (requer login) |
| `/produtos/pedidos/10/` | `pedido_detail` | PedidoDetailView | Detalhes pedido ID 10 |

## :three: Templates HTML

Os templates ficam em `templates/produtos/` para evitar conflitos e permitir herança.

```
config/
├── manage.py
├── config/
│   └── settings.py
└── produtos/
    └── templates/
        └── produtos/          # Pasta da app  (obrigatória!)
            ├── base.html      # Template base (layout principal)
            ├── categorias/
            │   ├── categoria_list.html
            │   └── categoria_detail.html
            ├── produtos/
            │   ├── produto_list.html
            │   └── produto_detail.html
            ├── clientes/
            │   ├── cliente_list.html
            │   └── cliente_detail.html
            └── pedidos/
                ├── pedido_list.html
                └── pedido_detail.html

```

**Comandos para Criar a Estrutura**

```bash
# Navegue até o diretório do projeto
cd produtos

# Crie a estrutura completa de uma vez
mkdir -p templates/produtos/{categorias,produtos,clientes,pedidos}
```

### 3.1. Descrição dos arquivos:

Cada arquivo na estrutura `templates/produtos/` possui uma função específica no sistema de exibição CRUD. A seguir, apresento a descrição completa de propósito, conteúdo esperado e contexto de uso para cada template, organizada de forma clara e fluida.

- **templates/produtos/base.html** serve como o template base ou layout principal compartilhado por todos os outros templates. Ele contém o header, footer, CSS/JS, navegação e o bloco `{% block content %}` essencial para herança de templates. Todos os demais templates estendem este arquivo usando `{% extends 'produtos/base.html' %}`.[19]

- **templates/produtos/categorias/categoria_list.html** exibe a listagem completa de todas as categorias de produtos. Vinculado à `CategoriaListView`, recebe o contexto com `categorias` e `total_categorias`. Apresenta cards ou lista com nome, descrição e contagem de produtos por categoria, incluindo paginação automática com `{{ page_obj }}`.

- **templates/produtos/categorias/categoria_detail.html** mostra os detalhes de uma categoria específica junto com um grid dos seus produtos. Usado pela `CategoriaDetailView`, acessa `categoria`, `produtos` (primeiros 12) e `total_produtos`. Exibe descrição completa da categoria seguida de produtos relacionados em layout visual atrativo.

- **templates/produtos/produtos/produto_list.html** funciona como a página inicial (home page) do site, listando apenas produtos em estoque. Associado à `ProdutoListView` (URL raiz `/`), recebe `produtos`, `categorias` (para filtros), `produtos_em_estoque` e `produtos_esgotados`. Utiliza grid responsivo Bootstrap em formato 4x3 com filtros por categoria para melhor experiência do usuário.

- **templates/produtos/produtos/produto_detail.html** apresenta a página detalhada de um produto específico, incluindo foto, preço, estoque e comentários. Ligado à `ProdutoDetailView`, trabalha com contexto rico: `produto`, `avaliacao_media`, `total_comentarios` e `produtos_similares`. Inclui galeria de imagens, estrelas de avaliação e botão "Adicionar ao Carrinho" otimizado para conversão de vendas.

- **templates/produtos/clientes/cliente_list.html** lista todos os clientes do sistema, acessível apenas para usuários logados (área administrativa). Conectado à `ClienteListView`, exibe tabela ou cards com nome, email, data de cadastro e total de pedidos, priorizando otimização com `select_related('user')`.

- **templates/produtos/clientes/cliente_detail.html** exibe o perfil completo de um cliente específico com todas as informações pessoais e histórico. Utilizado pela `ClienteDetailView`, apresenta seções organizadas com dados pessoais, endereços cadastrados, pedidos recentes e estatísticas completas como total de pedidos e comentários.

- **templates/produtos/pedidos/pedido_list.html** mostra a área "Meus Pedidos" exclusiva para o cliente logado. Associado à `PedidoListView`, lista pedidos em ordem cronológica com ID, data, status e valor total, filtrando automaticamente pelos pedidos do usuário atual.

- **templates/produtos/pedidos/pedido_detail.html** detalha completamente um pedido específico incluindo endereço de entrega e itens. Funciona com a `PedidoDetailView` e exibe endereço completo, lista de itens com produtos, quantidades, preços unitários, subtotal e total final calculado dinamicamente.
- 
A herança segue um fluxo lógico onde `base.html` é pai de todos os templates filhos, garantindo consistência visual e reutilização de código em todo o sistema.


### 3.2. Template base (`base.html`)


```html
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        {% block title %}Loja de Produtos{% endblock %}
    </title>
    
    <!-- Bootstrap 5.3 CDN - Fácil para iniciantes -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Navbar Principal -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="{% url 'produtos:produto_list' %}">
                <i class="fas fa-store me-2"></i>Loja Config
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'produtos:produto_list' %}">
                            <i class="fas fa-box me-1"></i>Produtos
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'produtos:categoria_list' %}">
                            <i class="fas fa-tags me-1"></i>Categorias
                        </a>
                    </li>
                </ul>
                
                <!-- Área do Usuário -->
                <ul class="navbar-nav">                    
                    {% if user.is_authenticated %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-user me-1"></i>{{ user.get_full_name|default:user.username }}
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="{#% url 'produtos:pedido_list' %#}">
                                    <i class="fas fa-shopping-bag me-2"></i>Meus Pedidos
                                </a></li>
                                {% if user.is_staff %}
                                <li><a class="dropdown-item" href="{% url 'produtos:cliente_list' %}">
                                    <i class="fas fa-users me-2"></i>Clientes
                                </a></li>
                                {% endif %}
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="{#% url 'logout' %#}">Sair</a></li>
                            </ul>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'login' %}">
                                <i class="fas fa-sign-in-alt me-1"></i>Entrar
                            </a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Mensagens do Django -->
    <div class="container mt-4">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            {% endfor %}
        {% endif %}
    </div>

    <!-- CONTEÚDO PRINCIPAL -->
    <main class="container my-4">
        {% block content %}
            <p>Conteúdo será substituído pelos templates filhos!</p>
        {% endblock %}
    </main>

    <!-- Footer Simples -->
    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container text-center">
            <p class="mb-0">&copy; 2025 Loja Config - Desenvolvido com <i class="fas fa-heart text-danger"></i> Django 5.2</p>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
```

### 3.3. `categoria_list.html`

```html
{% extends 'produtos/base.html' %}

{% block title %}Categorias - Loja Config{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="h3 mb-0">
        <i class="fas fa-list me-2 text-primary"></i>Lista de Categorias
    </h2>
    <span class="badge bg-primary">
        {{ categorias|length }} categoria{{ categorias|length|pluralize }}
    </span>
</div>

<!-- Tabela Simples com Botões de Ação -->
<div class="card">
    
    <div class="card-header bg-light">
        <strong>Gerencie suas categorias</strong>
    </div>

    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover mb-0 align-middle">
                
                <thead class="table-light">
                    <tr>
                        <th width="60">#</th>
                        <th>Nome</th>
                        <th>Descrição</th>
                        <th width="150">Ações</th>
                    </tr>
                </thead>

                <tbody>
                    {% for categoria in categorias %}
                    <tr>
                        <th scope="row">{{ forloop.counter }}</th>
                        <td>
                            <strong>{{ categoria.nome }}</strong>
                        </td>
                        <td>
                            {% if categoria.descricao %}
                                {{ categoria.descricao|truncatewords:10 }}
                            {% else %}
                                <span class="text-muted">Sem descrição</span>
                            {% endif %}
                        </td>
                        <td>
                            <div class="btn-group btn-group-sm" role="group">
                                <a href="{% url 'produtos:categoria_detail' categoria.pk %}" 
                                   class="btn btn-outline-primary">
                                    <i class="fas fa-eye"></i> Ver
                                </a>
                                <a href="#" class="btn btn-outline-warning">
                                    <i class="fas fa-edit"></i> Editar
                                </a>
                                <button class="btn btn-outline-danger">
                                    <i class="fas fa-trash"></i> Excluir
                                </button>
                            </div>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="4" class="text-center py-4">
                            <i class="fas fa-tags fa-2x text-muted mb-2"></i>
                            <p class="text-muted mb-0">Nenhuma categoria cadastrada</p>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<a href="{% url 'produtos:produto_list' %}" class="btn btn-outline-secondary mt-3">
    <i class="fas fa-arrow-left me-1"></i>Voltar aos Produtos
</a>
{% endblock %}
```



### 3.4. `categoria_detail.html`

```html
{% extends 'produtos/base.html' %}

{% block title %}Categoria: {{ categoria.nome }} - Loja Config{% endblock %}

{% block content %}
<div class="mb-4">
    <h2 class="text-primary">
        <i class="fas fa-tag me-2"></i>{{ categoria.nome }}
    </h2>
    {% if categoria.descricao %}
        <p>{{ categoria.descricao }}</p>
    {% else %}
        <p class="text-muted fst-italic">Esta categoria não possui descrição.</p>
    {% endif %}
    <hr>
</div>

<h4>Produtos desta categoria</h4>

{% if categoria.produtos.count > 0 %}
<table class="table table-striped table-bordered table-hover">

    <thead class="table-light">
        <tr>
            <th>#</th>
            <th>Nome do Produto</th>
            <th>Preço</th>
            <th>Estoque</th>
            <th>Ações</th>
        </tr>
    </thead>

    <tbody>
        {% for produto in categoria.produtos.all %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ produto.nome }}</td>
            <td>R$ {{ produto.preco|floatformat:2 }}</td>
            <td>{{ produto.estoque }}</td>
            <td>
                <a  href="{% url 'produtos:produto_detail' produto.pk %}" 
                    class="btn btn-sm btn-outline-primary">
                    <i class="fas fa-eye"></i> Ver
                </a>
                <a  href="#" 
                    class="btn btn-sm btn-outline-warning">
                    <i class="fas fa-edit"></i> Editar
                </a>
                <button class="btn btn-sm btn-outline-danger">
                    <i class="fas fa-trash"></i> Excluir
                </button>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="text-muted fst-italic mt-3">
    Nenhum produto cadastrado nesta categoria.
</p>
{% endif %}

<a  href="{% url 'produtos:categoria_list' %}" 
    class="btn btn-outline-secondary mt-4">
    
    <i class="fas fa-arrow-left me-1"></i> 
    Voltar para categorias

</a>
{% endblock %}

```


### 3.5. `produto_list.html`

```html
{% extends 'produtos/base.html' %}

{% block title %}Produtos - Loja Config{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="h3 mb-0">
        <i class="fas fa-box-open me-2 text-primary"></i>
        Produtos Disponíveis
    </h2>
    <span class="badge bg-success">
        {{ produtos|length }} produto {{ produtos|length|pluralize }}
    </span>
</div>

<!-- Tabela simples com dados essenciais -->
<div class="card">

    <div class="card-header bg-light">
        <strong>Lista de Produtos</strong>
    </div>
    
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover table-bordered align-middle mb-0">

                <thead class="table-light">
                    <tr>
                        <th width="50">#</th>
                        <th>Nome</th>
                        <th>Descrição</th>
                        <th>Preço</th>
                        <th>Estoque</th>
                        <th>Categoria</th>
                        <th width="150">Ações</th>
                    </tr>
                </thead>
                <tbody>

                    {% for produto in produtos %}

                    <tr>
                        <th scope="row">{{ forloop.counter }}</th>
                        <td>{{ produto.nome }}</td>
                        <td>{{ produto.descricao|truncatewords:10 }}</td>
                        <td>R$ {{ produto.preco|floatformat:2 }}</td>
                        <td>{{ produto.estoque }}</td>
                        <td>{{ produto.categoria.nome }}</td>
                        <td>
                            <div class="btn-group btn-group-sm" role="group">
                                <a href="{% url 'produtos:produto_detail' produto.pk %}" class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-eye"></i> Ver
                                </a>
                                <a href="#" class="btn btn-sm btn-outline-warning">
                                    <i class="fas fa-edit"></i> Editar
                                </a>
                                <button class="btn  btn-sm btn-outline-danger">
                                    <i class="fas fa-trash"></i> Excluir
                                </button>
                            </div>
                        </td>
                    </tr>

                    {% empty %}

                    <tr>
                        <td colspan="7" class="text-center py-4 text-muted fst-italic">
                            Nenhum produto disponível.
                        </td>
                    </tr>

                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<a  href="{% url 'produtos:categoria_list' %}" 
    class="btn btn-outline-secondary mt-3">

    <i class="fas fa-arrow-left me-1"></i> 
    Voltar para categorias

</a>
{% endblock %}

```

### 3.6. `produto_detail.html`

```html
{% extends 'produtos/base.html' %}

{% block title %}Produto: {{ produto.nome }} - Loja Config{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-5">
        {% if produto.foto %}
        <img src="{{ produto.foto.url }}" alt="Foto de {{ produto.nome }}" class="img-fluid rounded shadow">
        {% else %}
        <img src="https://via.placeholder.com/450x350?text=Sem+Imagem" alt="Sem imagem" class="img-fluid rounded shadow">
        {% endif %}
    </div>

    <div class="col-md-7">
        <h1 class="display-4 text-primary">{{ produto.nome }}</h1>
        <p class="lead">{{ produto.descricao }}</p>

        <div class="mb-3">
            <span class="badge bg-info fs-6">
                Categoria: {{ produto.categoria.nome }}
            </span>
            <span class="badge bg-success ms-2 fs-6">
                Estoque: {{ produto.estoque }}
            </span>
        </div>

        <h3 class="text-success fw-bold mb-4">
            R$ {{ produto.preco|floatformat:2 }}
        </h3>

        <a href="#" class="btn btn-primary btn-lg mb-4 w-100">
            <i class="fas fa-cart-plus me-2"></i>Adicionar ao Carrinho
        </a>

        <hr>

        <h4>Avaliações e Comentários</h4>
        {% if total_comentarios > 0 %}
        <p>
            <span class="fs-5 fw-bold text-warning">
                &#9733; {{ avaliacao_media|floatformat:1 }}
            </span>
            ({{ total_comentarios }} comentário{{ total_comentarios|pluralize }})
        </p>
        <ul class="list-group mb-3">
            {% for comentario in produto.comentarios.all %}
            <li class="list-group-item">
                <strong>{{ comentario.cliente }}</strong>:
                <span class="text-muted">{{ comentario.data|date:"d/m/Y H:i" }}</span>
                <br>
                <p>{{ comentario.comentario }}</p>
                <p>Avaliação: {{ comentario.avaliacao }} / 5</p>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p class="text-muted fst-italic">Nenhuma avaliação disponível para este produto.</p>
        {% endif %}

        <hr>

        <h5>Produtos Similares</h5>
        {% if produtos_similares %}
        <div class="d-flex flex-wrap gap-3">
            {% for sim in produtos_similares %}
            <div class="card" style="width: 10rem;">
                {% if sim.foto %}
                <img src="{{ sim.foto.url }}" alt="{{ sim.nome }}" class="card-img-top" style="height: 100px; object-fit: cover;">
                {% else %}
                <img src="https://via.placeholder.com/160x100?text=Sem+Imagem" alt="sem imagem" class="card-img-top">
                {% endif %}
                <div class="card-body p-2">
                    <h6 class="card-title text-truncate">{{ sim.nome }}</h6>
                    <a href="{% url 'produtos:produto_detail' sim.pk %}" class="btn btn-sm btn-outline-primary w-100">Ver</a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p class="text-muted fst-italic">Nenhum produto similar encontrado.</p>
        {% endif %}
    </div>
</div>

<div class="mt-4">
    <a href="{% url 'produtos:produto_list' %}" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left me-1"></i> Voltar para produtos
    </a>
</div>

{% endblock %}

```

### 3.7. `cliente_list.html`

```html
{% extends 'produtos/base.html' %}

{% block title %}Lista de Clientes - Loja Config{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="h3 mb-0">
        <i class="fas fa-users me-2 text-primary"></i>Lista de Clientes
    </h2>
    <span class="badge bg-primary">
        {{ clientes|length }} cliente{{ clientes|length|pluralize }}
    </span>
</div>

<!-- Tabela de Clientes com Botões de Ação -->
<div class="card">
    <div class="card-header bg-light">
        <strong>Gerencie os clientes do sistema (Apenas administradores)</strong>
    </div>
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover table-bordered align-middle mb-0">
                <thead class="table-light">
                    <tr>
                        <th width="60">#</th>
                        <th>Foto</th>
                        <th>Nome / Nome Social</th>
                        <th>Email (User)</th>
                        <th>Telefone</th>
                        <th>Data Cadastro</th>
                        <th width="160">Ações</th>
                    </tr>
                </thead>
                <tbody>
                    {% for cliente in clientes %}
                    <tr>
                        <th scope="row">{{ forloop.counter }}</th>
                        <td>
                            {% if cliente.foto %}
                                <img src="{{ cliente.foto.url }}" 
                                     alt="{{ cliente }}" 
                                     class="rounded-circle" 
                                     style="width: 40px; height: 40px; object-fit: cover;">
                            {% else %}
                                <div class="bg-secondary rounded-circle d-flex align-items-center justify-content-center" 
                                     style="width: 40px; height: 40px;">
                                    <i class="fas fa-user text-white"></i>
                                </div>
                            {% endif %}
                        </td>
                        <td>
                            <strong>{{ cliente }}</strong>
                            {% if cliente.nome_social and cliente.nome_social != cliente.user.get_full_name %}
                                <br><small class="text-muted">Social: {{ cliente.nome_social }}</small>
                            {% endif %}
                        </td>
                        <td>
                            {% if cliente.user.email %}
                                {{ cliente.user.email }}
                            {% else %}
                                <span class="text-muted">Sem email</span>
                            {% endif %}
                        </td>
                        <td>
                            {% if cliente.telefone %}
                                {{ cliente.telefone }}
                            {% else %}
                                <span class="text-muted">-</span>
                            {% endif %}
                        </td>
                        <td>
                            {{ cliente.data_cadastro|date:"d/m/Y H:i" }}
                        </td>
                        <td>
                            <div class="btn-group btn-group-sm" role="group">
                                <a href="{% url 'produtos:cliente_detail' cliente.pk %}" 
                                   class="btn btn-outline-primary">
                                    <i class="fas fa-eye"></i> Ver
                                </a>
                                <a href="#" class="btn btn-outline-warning">
                                    <i class="fas fa-edit"></i> Editar
                                </a>
                                <button class="btn btn-outline-danger" title="Excluir cliente">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="7" class="text-center py-4 text-muted">
                            <i class="fas fa-users fa-2x text-muted mb-2"></i>
                            <p>Nenhum cliente cadastrado no sistema.</p>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="mt-3">
    <a href="{% url 'produtos:produto_list' %}" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left me-1"></i>Voltar aos Produtos
    </a>
</div>
{% endblock %}

```

### 3.8. `cliente_detail.html`

```html
{% extends 'produtos/base.html' %}

{% block title %}Cliente: {{ cliente }} - Loja Config{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-3 text-center">
        {% if cliente.foto %}
            <img src="{{ cliente.foto.url }}" 
                 alt="{{ cliente }}" 
                 class="img-fluid rounded-circle shadow mb-3"
                 style="width: 150px; height: 150px; object-fit: cover;">
        {% else %}
            <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center mb-3"
                 style="width: 150px; height: 150px;">
                <i class="fas fa-user fa-3x text-white"></i>
            </div>
        {% endif %}
        
        <h4 class="text-primary">{{ cliente }}</h4>
        {% if cliente.nome_social %}
            <p class="text-muted mb-0">({{ cliente.nome_social }})</p>
        {% endif %}
        <p class="text-muted">
            <i class="fas fa-calendar me-1"></i>
            {{ cliente.data_cadastro|date:"d/m/Y H:i" }}
        </p>
    </div>
    
    <div class="col-md-9">
        <!-- Dados Pessoais -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-user me-2"></i>Dados Pessoais</h5>
            </div>
            <div class="card-body">
                <table class="table table-borderless">
                    {% if cliente.user.email %}
                    <tr>
                        <td><strong>Email:</strong></td>
                        <td>{{ cliente.user.email }}</td>
                    </tr>
                    {% endif %}
                    {% if cliente.telefone %}
                    <tr>
                        <td><strong>Telefone:</strong></td>
                        <td>{{ cliente.telefone }}</td>
                    </tr>
                    {% endif %}
                    {% if cliente.cpf %}
                    <tr>
                        <td><strong>CPF:</strong></td>
                        <td>{{ cliente.cpf }}</td>
                    </tr>
                    {% endif %}
                    {% if cliente.sexo %}
                    <tr>
                        <td><strong>Sexo:</strong></td>
                        <td>{{ cliente.get_sexo_display }}</td>
                    </tr>
                    {% endif %}
                    {% if cliente.data_nascimento %}
                    <tr>
                        <td><strong>Data Nascimento:</strong></td>
                        <td>{{ cliente.data_nascimento|date:"d/m/Y" }}</td>
                    </tr>
                    {% endif %}
                </table>
            </div>
        </div>

        <!-- Endereços -->
        {% if enderecos %}
        <div class="card mb-4">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0"><i class="fas fa-map-marker-alt me-2"></i>Endereços ({{ enderecos|length }})</h5>
            </div>
            <div class="card-body">
                {% for endereco in enderecos %}
                <div class="border-bottom pb-3 mb-3">
                    <h6 class="fw-bold">{{ endereco }}</h6>
                    <small class="text-muted">
                        {{ endereco.endereco }} - {{ endereco.cidade }} / {{ endereco.estado }}
                    </small>
                </div>
                {% endfor %}
            </div>
        </div>
        {% else %}
        <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>Nenhum endereço cadastrado.
        </div>
        {% endif %}
    </div>
</div>

<!-- Botões de Ação -->
<div class="card">
    <div class="card-header bg-light">
        <strong>Ações Administrativas</strong>
    </div>
    <div class="card-body">
        <div class="btn-group w-100" role="group">
            <a href="{% url 'produtos:cliente_list' %}" class="btn btn-outline-secondary">
                <i class="fas fa-list me-1"></i>Lista de Clientes
            </a>
            <a href="#" class="btn btn-outline-warning">
                <i class="fas fa-edit me-1"></i>Editar Cliente
            </a>
            <button class="btn btn-outline-danger">
                <i class="fas fa-trash me-1"></i>Excluir Cliente
            </button>
        </div>
    </div>
</div>
{% endblock %}


```

